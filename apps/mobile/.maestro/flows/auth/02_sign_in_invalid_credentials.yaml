# =============================================================================
# AUTH-02: Sign In — Invalid Credentials
# Verifies that submitting wrong credentials shows an error message
# and does NOT navigate away from the onboarding screen.
# =============================================================================
appId: com.mindlog.app

---

# Launch with a clean slate
- launchApp:
    clearState: true

# Connect to Metro dev server (Expo Dev Client)
- runFlow: ../../subflows/connect_dev_server.yaml

# Verify onboarding screen loaded
- extendedWaitUntil:
    visible:
      text: "MindLog"
    timeout: 10000

# Switch to the Sign In tab
- tapOn:
    id: "tab-signin"

# Enter an invalid email
- tapOn:
    id: "email-input"
- inputText: "wrong@test.com"

# Enter an invalid password
- tapOn:
    id: "password-input"
- inputText: "WrongPass123!"

# Submit sign-in form
- tapOn:
    id: "sign-in-btn"

# Expect an error message — the API may return different wording
- extendedWaitUntil:
    visible:
      text: "Invalid credentials|Login failed"
    timeout: 10000

- takeScreenshot: screenshots/auth_sign_in_invalid_credentials
