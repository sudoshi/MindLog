# =============================================================================
# ACCESSIBILITY-03: Insights Screen Accessibility Labels
# Verifies that the Insights tab loads its title and exposes the AI consent /
# privacy settings affordance so screen readers can announce it. The privacy
# element is optional because it depends on the patient's consent state.
# FDA SaMD — WCAG 2.1 AA compliance checkpoint.
# =============================================================================
appId: com.mindlog.app

---

# Launch with a clean slate
- launchApp:
    clearState: true

# Connect to Metro dev server (Expo Dev Client)
- runFlow: ../../subflows/connect_dev_server.yaml

# Sign in as the demo patient
- runFlow: ../../subflows/sign_in.yaml

# Navigate to the Insights tab
- tapOn:
    text: "Insights"

# Wait for the Insights screen to load (data fetch may take a moment)
- extendedWaitUntil:
    visible:
      text: "Insights"
    timeout: 15000

# ── Screen title ──────────────────────────────────────────────────────────
- extendedWaitUntil:
    visible:
      text: "Insights"
    timeout: 5000

# ── Privacy settings label (optional — depends on AI consent state) ───────
# If the patient has not yet consented to AI insights, a privacy-settings
# prompt should be visible. This is optional because seeded demo data may
# already have consent granted.
- assertVisible:
    text: "privacy settings"
    optional: true

- takeScreenshot: screenshots/a11y_insights
