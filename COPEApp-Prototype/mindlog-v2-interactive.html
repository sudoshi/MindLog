<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MindLog â€” Interactive Prototype v2</title>
<link href="https://fonts.googleapis.com/css2?family=Fraunces:ital,opsz,wght@0,9..144,300;0,9..144,400;0,9..144,600;0,9..144,700;1,9..144,300;1,9..144,400&family=Figtree:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<style>
/* â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
   MINDLOG DESIGN SYSTEM â€” PATIENT MOBILE APP
   â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

   This is the patient-facing mobile app, designed to feel
   warm, supportive, and approachable.

   Typography:
   - Display: Fraunces (warm, humanist serif)
   - Body: Figtree (friendly, clear sans-serif)

   Color Philosophy:
   - Light warm background (#f7f4ef) for comfort
   - Teal primary (#2a9d8f) for growth and wellness
   - Amber/Rose for alerts and attention
   - Soft, muted accents to reduce anxiety

   Mood Scale: Consistent across all MindLog products
   1-2: Red (crisis) â†’ 3-4: Orange â†’ 5: Yellow/Amber â†’
   6-7: Green â†’ 8: Teal â†’ 9-10: Blue (thriving)

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” */
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0;}
:root{
  --bg:#0a0c10;
  --screen-bg:#f7f4ef;
  --screen-bg2:#efecea;
  --card:#ffffff;
  --border:#e2ddd6;
  --border-dark:#d4cec6;
  --ink:#1a1714;
  --ink-mid:#5c5650;
  --ink-soft:#9b958e;
  --ink-ghost:#c8c2bb;
  --teal:#2a9d8f;
  --teal-light:#e8f6f4;
  --teal-mid:#52b9ae;
  --amber:#e76f1b;
  --amber-light:#fef3ea;
  --rose:#e05c6e;
  --rose-light:#fdeef0;
  --sage:#5a8a6a;
  --sage-light:#eef5f0;
  --lavender:#7c6fa0;
  --lavender-light:#f2f0f8;
  --gold:#c9972a;
  --gold-light:#fdf6e8;
  --blue:#2a6db5;
  --font-display:'Fraunces',Georgia,serif;
  --font-body:'Figtree',-apple-system,sans-serif;
  --r-xs:6px;--r-sm:10px;--r-md:16px;--r-lg:22px;--r-xl:28px;--r-full:999px;
}
body{font-family:var(--font-body);background:var(--bg);min-height:100vh;display:flex;flex-direction:column;align-items:center;padding:32px 20px 80px;overflow-x:hidden;}
body::after{content:'';position:fixed;inset:0;background:radial-gradient(ellipse 60% 40% at 15% 20%,rgba(42,157,143,.07) 0%,transparent 60%),radial-gradient(ellipse 50% 60% at 85% 80%,rgba(231,111,27,.05) 0%,transparent 55%);pointer-events:none;z-index:0;}

/* â”€â”€ PAGE HEADER â”€â”€ */
.page-header{position:relative;z-index:10;text-align:center;margin-bottom:36px;}
.page-title{font-family:var(--font-display);font-size:44px;font-weight:300;color:#f0ede8;letter-spacing:-1px;line-height:1;margin-bottom:6px;}
.page-title em{font-style:italic;color:#b8c8a8;}
.page-subtitle{font-size:13px;color:rgba(240,237,232,.4);letter-spacing:.5px;}

/* â”€â”€ SCREEN NAV â”€â”€ */
.screen-nav{position:relative;z-index:10;display:flex;gap:6px;margin-bottom:32px;flex-wrap:wrap;justify-content:center;}
.nav-btn{background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.1);color:rgba(240,237,232,.5);font-family:var(--font-body);font-size:11px;font-weight:600;padding:7px 14px;border-radius:var(--r-full);cursor:pointer;transition:all .2s;letter-spacing:.3px;}
.nav-btn:hover{background:rgba(255,255,255,.1);color:rgba(240,237,232,.8);}
.nav-btn.active{background:#f0ede8;border-color:#f0ede8;color:#0f1117;}

/* â”€â”€ STAGE â”€â”€ */
.phone-stage{position:relative;z-index:10;display:flex;justify-content:center;align-items:flex-start;gap:44px;flex-wrap:wrap;}
.phone-shell{width:390px;height:844px;background:#1c1c1e;border-radius:54px;padding:12px;box-shadow:0 0 0 1px rgba(255,255,255,.08),0 60px 120px rgba(0,0,0,.7),0 30px 60px rgba(0,0,0,.5),inset 0 0 0 1px rgba(255,255,255,.04);position:relative;}
.phone-shell::before{content:'';position:absolute;left:-3px;top:140px;width:3px;height:36px;background:#2c2c2e;border-radius:2px 0 0 2px;box-shadow:0 50px 0 #2c2c2e,0 100px 0 #2c2c2e;}
.phone-shell::after{content:'';position:absolute;right:-3px;top:180px;width:3px;height:66px;background:#2c2c2e;border-radius:0 2px 2px 0;}
.phone-screen{width:100%;height:100%;background:var(--screen-bg);border-radius:44px;overflow:hidden;position:relative;display:flex;flex-direction:column;}
.dynamic-island{position:absolute;top:12px;left:50%;transform:translateX(-50%);width:120px;height:34px;background:#000;border-radius:20px;z-index:100;}

/* â”€â”€ STATUS BAR â”€â”€ */
.status-bar{height:54px;display:flex;align-items:flex-end;justify-content:space-between;padding:0 28px 10px;flex-shrink:0;}
.status-time{font-size:15px;font-weight:700;color:var(--ink);letter-spacing:-.3px;}
.status-icons{display:flex;gap:6px;align-items:center;}

/* â”€â”€ SCREENS â”€â”€ */
.screen{display:none;width:100%;height:100%;flex-direction:column;overflow:hidden;}
.screen.active{display:flex;}

/* â”€â”€ SCROLL AREA â”€â”€ */
.scroll-area{flex:1;overflow-y:auto;overflow-x:hidden;scrollbar-width:none;padding:16px 20px 100px;}
.scroll-area::-webkit-scrollbar{display:none;}

/* â”€â”€ TAB BAR â”€â”€ */
.tab-bar{display:flex;height:82px;background:rgba(247,244,239,.96);border-top:1px solid var(--border);padding:8px 0 20px;flex-shrink:0;backdrop-filter:blur(10px);position:relative;z-index:10;}
.tab-item{flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:3px;cursor:pointer;padding:6px 2px;border-radius:var(--r-sm);margin:0 2px;transition:all .2s;}
.tab-item:active{transform:scale(.92);}
.tab-icon{width:28px;height:28px;border-radius:9px;display:flex;align-items:center;justify-content:center;font-size:15px;transition:all .2s;}
.tab-item.active .tab-icon{background:var(--teal);}
.tab-label{font-size:9px;font-weight:600;color:var(--ink-ghost);letter-spacing:.3px;transition:color .2s;}
.tab-item.active .tab-label{color:var(--teal);}

/* â”€â”€ SHARED COMPONENTS â”€â”€ */
.section-head-label{font-size:11px;font-weight:700;text-transform:uppercase;letter-spacing:1.2px;color:var(--ink-soft);margin:20px 0 8px;}
.section-head-label:first-child{margin-top:4px;}
.card{background:var(--card);border-radius:var(--r-lg);border:1px solid var(--border);overflow:hidden;box-shadow:0 1px 3px rgba(0,0,0,.05);margin-bottom:10px;}
.card-row{padding:14px 18px;border-bottom:1px solid var(--border);}
.card-row:last-child{border-bottom:none;}

/* Date strip */
.date-strip{display:flex;align-items:center;justify-content:space-between;padding:8px 20px 10px;border-bottom:1px solid var(--border);background:var(--screen-bg);flex-shrink:0;}
.date-arrow{width:30px;height:30px;border-radius:50%;display:flex;align-items:center;justify-content:center;cursor:pointer;color:var(--teal);font-size:18px;transition:all .15s;user-select:none;}
.date-arrow:active{background:var(--teal-light);transform:scale(.88);}
.date-label-day{font-size:15px;font-weight:700;color:var(--ink);text-align:center;letter-spacing:-.2px;}
.date-label-full{font-size:11px;color:var(--ink-soft);text-align:center;margin-top:1px;}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   ONBOARDING SCREENS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
/* Screen OB-1: Welcome */
.ob-welcome{flex:1;display:flex;flex-direction:column;background:linear-gradient(165deg,#0f2420 0%,#1a3a35 45%,#0d1f1c 100%);position:relative;overflow:hidden;}
.ob-welcome::before{content:'';position:absolute;top:-80px;right:-80px;width:320px;height:320px;background:radial-gradient(circle,rgba(42,157,143,.2) 0%,transparent 65%);}
.ob-welcome::after{content:'';position:absolute;bottom:-60px;left:-60px;width:260px;height:260px;background:radial-gradient(circle,rgba(90,138,106,.15) 0%,transparent 65%);}
.ob-logo-area{flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center;position:relative;z-index:1;padding:40px 32px;}
.ob-app-icon{width:80px;height:80px;background:linear-gradient(135deg,#2a9d8f,#1a6d64);border-radius:22px;display:flex;align-items:center;justify-content:center;font-size:36px;box-shadow:0 20px 40px rgba(0,0,0,.4),0 0 0 1px rgba(255,255,255,.1);margin-bottom:24px;animation:iconFloat 3s ease-in-out infinite;}
@keyframes iconFloat{0%,100%{transform:translateY(0);}50%{transform:translateY(-8px);}}
.ob-app-name{font-family:var(--font-display);font-size:42px;font-weight:300;color:#f0ede8;letter-spacing:-1px;margin-bottom:8px;}
.ob-app-name em{font-style:italic;color:#7ec8a0;}
.ob-tagline{font-size:15px;color:rgba(240,237,232,.55);text-align:center;line-height:1.55;max-width:240px;}
.ob-bottom{padding:28px 32px 44px;position:relative;z-index:1;display:flex;flex-direction:column;gap:10px;}
.ob-btn-primary{background:#2a9d8f;border-radius:var(--r-md);padding:16px;display:flex;align-items:center;justify-content:center;font-size:16px;font-weight:700;color:white;cursor:pointer;transition:all .2s;box-shadow:0 8px 24px rgba(42,157,143,.4);}
.ob-btn-primary:active{transform:scale(.97);opacity:.9;}
.ob-btn-secondary{border-radius:var(--r-md);padding:14px;display:flex;align-items:center;justify-content:center;font-size:15px;font-weight:600;color:rgba(240,237,232,.6);cursor:pointer;transition:all .2s;}
.ob-btn-secondary:active{color:rgba(240,237,232,.9);}

/* OB-2: What it does */
.ob-slides-screen{flex:1;display:flex;flex-direction:column;background:var(--screen-bg);}
.ob-slide-content{flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:32px 32px 16px;text-align:center;}
.ob-slide-visual{width:100px;height:100px;border-radius:28px;display:flex;align-items:center;justify-content:center;font-size:48px;margin-bottom:28px;box-shadow:0 16px 36px rgba(0,0,0,.1);}
.ob-slide-title{font-family:var(--font-display);font-size:28px;font-weight:400;color:var(--ink);letter-spacing:-.5px;line-height:1.2;margin-bottom:12px;}
.ob-slide-body{font-size:15px;color:var(--ink-mid);line-height:1.6;max-width:280px;}
.ob-dots{display:flex;gap:8px;justify-content:center;padding:16px 0;}
.ob-dot{width:6px;height:6px;border-radius:50%;background:var(--border-dark);transition:all .3s;}
.ob-dot.active{width:20px;border-radius:3px;background:var(--teal);}
.ob-slide-nav{padding:20px 32px 32px;display:flex;gap:10px;}
.ob-slide-nav .ob-btn-primary{flex:1;}
.ob-skip{font-size:14px;font-weight:600;color:var(--ink-ghost);padding:16px 20px;cursor:pointer;display:flex;align-items:center;}

/* OB-3: Setup â€“ medications */
.ob-setup{flex:1;display:flex;flex-direction:column;}
.ob-setup-header{padding:20px 28px 16px;border-bottom:1px solid var(--border);}
.ob-setup-step{font-size:11px;font-weight:700;text-transform:uppercase;letter-spacing:1.2px;color:var(--teal);margin-bottom:6px;}
.ob-setup-title{font-family:var(--font-display);font-size:26px;font-weight:400;color:var(--ink);letter-spacing:-.4px;line-height:1.2;}
.ob-setup-sub{font-size:13px;color:var(--ink-soft);margin-top:6px;}
.ob-setup-body{flex:1;overflow-y:auto;padding:16px 24px 20px;scrollbar-width:none;}
.ob-setup-body::-webkit-scrollbar{display:none;}
.med-chip{display:flex;align-items:center;gap:10px;background:var(--card);border:1px solid var(--border);border-radius:var(--r-md);padding:12px 14px;margin-bottom:8px;animation:chipIn .25s ease both;}
@keyframes chipIn{from{opacity:0;transform:translateY(8px);}to{opacity:1;transform:translateY(0);}}
.med-chip-icon{width:32px;height:32px;border-radius:9px;background:var(--teal-light);display:flex;align-items:center;justify-content:center;font-size:16px;flex-shrink:0;}
.med-chip-info{flex:1;}
.med-chip-name{font-size:14px;font-weight:700;color:var(--ink);}
.med-chip-dose{font-size:12px;color:var(--ink-soft);}
.med-chip-remove{width:24px;height:24px;border-radius:50%;background:var(--rose-light);display:flex;align-items:center;justify-content:center;cursor:pointer;color:var(--rose);font-size:14px;flex-shrink:0;transition:all .15s;}
.med-chip-remove:active{transform:scale(.85);}
.ob-add-med{display:flex;align-items:center;gap:10px;border:1.5px dashed var(--border-dark);border-radius:var(--r-md);padding:12px 14px;cursor:pointer;transition:all .2s;background:transparent;margin-bottom:16px;}
.ob-add-med:active{background:var(--teal-light);border-color:var(--teal);}
.ob-add-med-icon{width:32px;height:32px;border-radius:9px;background:var(--teal-light);display:flex;align-items:center;justify-content:center;font-size:18px;color:var(--teal);}
.ob-add-med-text{font-size:14px;font-weight:600;color:var(--teal);}
/* Input row for adding med */
.ob-input-row{display:flex;gap:8px;margin-bottom:12px;}
.ob-input{flex:1;background:var(--card);border:1.5px solid var(--border);border-radius:var(--r-sm);padding:10px 14px;font-family:var(--font-body);font-size:14px;color:var(--ink);outline:none;transition:border-color .2s;}
.ob-input:focus{border-color:var(--teal);}
.ob-input-btn{background:var(--teal);border:none;border-radius:var(--r-sm);padding:10px 14px;font-size:14px;font-weight:700;color:white;cursor:pointer;white-space:nowrap;}
.ob-input-btn:active{opacity:.85;}
.ob-progress-bar{height:3px;background:var(--border);flex-shrink:0;}
.ob-progress-fill{height:100%;background:var(--teal);border-radius:2px;transition:width .4s ease;}

/* OB-4: Notification permission */
.ob-notif{flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:32px;text-align:center;}
.ob-notif-visual{width:80px;height:80px;border-radius:22px;background:linear-gradient(135deg,#f5c842,#e07a1a);display:flex;align-items:center;justify-content:center;font-size:38px;margin-bottom:24px;box-shadow:0 16px 32px rgba(231,111,27,.3);}
.notif-preview{background:var(--card);border:1px solid var(--border);border-radius:var(--r-md);padding:14px 16px;width:100%;margin:20px 0;text-align:left;box-shadow:0 4px 12px rgba(0,0,0,.07);}
.notif-preview-header{display:flex;align-items:center;gap:8px;margin-bottom:6px;}
.notif-app-icon{width:20px;height:20px;border-radius:5px;background:var(--teal);display:flex;align-items:center;justify-content:center;font-size:11px;}
.notif-app-name{font-size:11px;font-weight:700;color:var(--ink-soft);text-transform:uppercase;letter-spacing:.5px;}
.notif-time{font-size:11px;color:var(--ink-ghost);margin-left:auto;}
.notif-title{font-size:14px;font-weight:700;color:var(--ink);margin-bottom:2px;}
.notif-body{font-size:13px;color:var(--ink-mid);}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SCREEN 1: TODAY (Interactive)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.today-header{padding:10px 24px 20px;background:linear-gradient(160deg,#1a3a35 0%,#0f2420 100%);flex-shrink:0;position:relative;overflow:hidden;}
.today-header::before{content:'';position:absolute;top:-40px;right:-40px;width:200px;height:200px;background:radial-gradient(circle,rgba(42,157,143,.25) 0%,transparent 70%);pointer-events:none;}
.today-greeting{font-family:var(--font-display);font-size:24px;font-weight:300;color:rgba(240,237,232,.95);letter-spacing:-.5px;line-height:1.2;margin-bottom:4px;}
.today-date-label{font-size:13px;color:rgba(240,237,232,.5);margin-bottom:18px;}
.completion-row{display:flex;align-items:center;gap:16px;}
.ring-wrapper{position:relative;width:64px;height:64px;flex-shrink:0;}
.ring-text{position:absolute;inset:0;display:flex;flex-direction:column;align-items:center;justify-content:center;}
.ring-pct{font-size:14px;font-weight:700;color:#e8f6f4;line-height:1;}
.ring-pct-label{font-size:8px;color:rgba(232,246,244,.5);text-transform:uppercase;letter-spacing:.5px;}
.completion-details{flex:1;}
.completion-item{display:flex;align-items:center;gap:8px;margin-bottom:5px;}
.completion-dot{width:6px;height:6px;border-radius:50%;flex-shrink:0;}
.completion-text{font-size:12px;color:rgba(240,237,232,.7);}
.completion-text strong{color:rgba(240,237,232,.95);font-weight:600;}

/* Entry cards */
.entry-card{background:var(--card);border-radius:var(--r-lg);border:1px solid var(--border);overflow:hidden;margin-bottom:12px;box-shadow:0 1px 3px rgba(0,0,0,.05);}
.entry-card-header{display:flex;align-items:center;justify-content:space-between;padding:14px 16px 10px;}
.entry-card-title{display:flex;align-items:center;gap:8px;}
.entry-card-icon{width:28px;height:28px;border-radius:8px;display:flex;align-items:center;justify-content:center;font-size:14px;}
.entry-card-name{font-size:14px;font-weight:700;color:var(--ink);}
.status-badge{font-size:11px;font-weight:600;padding:3px 9px;border-radius:var(--r-full);}

/* MOOD RING â€“ interactive */
.mood-ring{display:flex;justify-content:space-between;padding:4px 14px 16px;gap:3px;}
.mood-pip{flex:1;height:36px;border-radius:8px;display:flex;align-items:center;justify-content:center;font-size:11px;font-weight:700;color:rgba(255,255,255,.85);cursor:pointer;transition:transform .15s,box-shadow .15s;position:relative;user-select:none;-webkit-tap-highlight-color:transparent;}
.mood-pip:hover{transform:translateY(-2px);}
.mood-pip:active{transform:translateY(0) scale(.92);}
.mood-pip.selected{transform:translateY(-4px);box-shadow:0 6px 16px rgba(0,0,0,.25);}
.mood-pip.selected::after{content:'';position:absolute;bottom:-8px;left:50%;transform:translateX(-50%);width:4px;height:4px;border-radius:50%;background:var(--ink);}

/* Sleep stepper */
.sleep-display{padding:4px 16px 16px;display:flex;align-items:center;gap:20px;}
.sleep-big{text-align:center;}
.sleep-num{font-family:var(--font-display);font-size:34px;font-weight:300;color:var(--ink);line-height:1;letter-spacing:-1px;}
.sleep-unit{font-size:11px;color:var(--ink-soft);margin-top:2px;}
.sleep-stepper-group{flex:1;}
.sleep-stepper{display:flex;align-items:center;background:var(--screen-bg2);border:1px solid var(--border);border-radius:var(--r-sm);overflow:hidden;margin-bottom:6px;}
.stepper-minus,.stepper-plus{width:40px;height:34px;display:flex;align-items:center;justify-content:center;font-size:20px;color:var(--teal);cursor:pointer;font-weight:300;transition:background .1s;flex-shrink:0;user-select:none;-webkit-tap-highlight-color:transparent;}
.stepper-minus:active,.stepper-plus:active{background:var(--teal-light);}
.stepper-val{flex:1;text-align:center;font-size:16px;font-weight:700;color:var(--ink);border-left:1px solid var(--border);border-right:1px solid var(--border);padding:0 4px;}
.stepper-label{font-size:10px;color:var(--ink-soft);text-align:center;}

/* Exercise presets */
.exercise-presets{display:flex;gap:6px;padding:4px 14px 16px;}
.preset-btn{flex:1;height:34px;border-radius:var(--r-sm);display:flex;align-items:center;justify-content:center;font-size:12px;font-weight:700;cursor:pointer;border:1.5px solid var(--border);background:var(--screen-bg2);color:var(--ink-mid);transition:all .15s;user-select:none;-webkit-tap-highlight-color:transparent;}
.preset-btn:active{transform:scale(.92);}
.preset-btn.active{background:var(--teal);border-color:var(--teal);color:white;box-shadow:0 4px 12px rgba(42,157,143,.3);}

/* Medicine toggle */
.medicine-row{display:flex;align-items:center;justify-content:space-between;padding:14px 18px;}
.med-name{font-size:14px;font-weight:600;color:var(--ink);}
.med-sub{font-size:12px;color:var(--ink-soft);}
.toggle-pill{width:50px;height:28px;border-radius:14px;position:relative;transition:background .25s;cursor:pointer;flex-shrink:0;-webkit-tap-highlight-color:transparent;}
.toggle-pill.on{background:var(--teal);}
.toggle-pill.off{background:var(--ink-ghost);}
.toggle-pill .knob{position:absolute;top:3px;width:22px;height:22px;background:white;border-radius:50%;box-shadow:0 2px 6px rgba(0,0,0,.25);transition:left .25s;}
.toggle-pill.on .knob{left:25px;}
.toggle-pill.off .knob{left:3px;}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   WELLNESS (Interactive)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.wellness-header,.triggers-header,.symptoms-header,.journal-header,.insights-header{padding:12px 24px 18px;flex-shrink:0;position:relative;overflow:hidden;}
.wellness-header{background:linear-gradient(150deg,#1e3a2a 0%,#122216 100%);}
.triggers-header{background:linear-gradient(150deg,#3a1e1e 0%,#241212 100%);}
.symptoms-header{background:linear-gradient(150deg,#2a1e3a 0%,#1a1224 100%);}
.journal-header{background:linear-gradient(150deg,#2e2810 0%,#1c1a0a 100%);}
.insights-header{background:linear-gradient(150deg,#0f2535 0%,#091820 100%);}
.screen-header-top{display:flex;align-items:center;justify-content:space-between;margin-bottom:8px;}
.screen-header-back{font-size:14px;color:rgba(240,237,232,.5);cursor:pointer;padding:4px 0;}
.screen-header-date{font-size:11px;color:rgba(240,237,232,.35);}
.screen-header-title{font-family:var(--font-display);font-size:22px;font-weight:400;color:rgba(240,237,232,.95);letter-spacing:-.3px;margin-bottom:4px;}
.screen-header-sub{font-size:12px;color:rgba(240,237,232,.45);}
.header-stat-row{display:flex;gap:12px;margin-top:14px;}
.header-stat{background:rgba(255,255,255,.08);border:1px solid rgba(255,255,255,.1);border-radius:var(--r-sm);padding:8px 12px;flex:1;}
.header-stat-num{font-size:20px;font-weight:700;font-family:var(--font-display);color:rgba(240,237,232,.95);line-height:1;}
.header-stat-label{font-size:10px;color:rgba(240,237,232,.45);text-transform:uppercase;letter-spacing:.5px;margin-top:3px;}

/* Strategy / Trigger item */
.strategy-item,.trigger-item,.symptom-item{padding:13px 18px;border-bottom:1px solid var(--border);}
.strategy-item:last-child,.trigger-item:last-child,.symptom-item:last-child{border-bottom:none;}
.item-top{display:flex;align-items:center;justify-content:space-between;}
.item-left{display:flex;align-items:center;gap:10px;}
.item-icon{font-size:18px;width:24px;text-align:center;}
.item-name{font-size:14px;font-weight:600;color:var(--ink);transition:color .2s;}
.item-name.dimmed{color:var(--ink-ghost);}

/* Tristate */
.tristate{display:flex;background:var(--screen-bg2);border:1px solid var(--border);border-radius:var(--r-full);overflow:hidden;user-select:none;}
.ts-btn{padding:5px 10px;font-size:11px;font-weight:700;color:var(--ink-ghost);cursor:pointer;transition:all .15s;white-space:nowrap;-webkit-tap-highlight-color:transparent;}
.ts-btn:active{opacity:.7;}
.ts-btn.y{background:var(--sage);color:white;border-radius:var(--r-full);}
.ts-btn.n{background:var(--rose);color:white;border-radius:var(--r-full);}
.ts-btn.na{background:var(--ink-ghost);color:white;border-radius:var(--r-full);}
/* Triggers: on/na only */
.ts-btn.on{background:var(--rose);color:white;border-radius:var(--r-full);}
/* Symptoms */
.ts-btn.active-lav{background:var(--lavender);color:white;border-radius:var(--r-full);}

/* Inline sliders */
.inline-slider{overflow:hidden;transition:max-height .3s ease,opacity .3s ease;}
.inline-slider.hidden{max-height:0;opacity:0;}
.inline-slider.visible{max-height:80px;opacity:1;}
.slider-wrap{margin-top:10px;padding:8px 12px;border-radius:var(--r-sm);}
.slider-wrap.sage-wrap{background:var(--sage-light);}
.slider-wrap.rose-wrap{background:var(--rose-light);}
.slider-wrap.lav-wrap{background:var(--lavender-light);}
.slider-label{display:flex;justify-content:space-between;font-size:11px;color:var(--ink-soft);margin-bottom:8px;}
.slider-val{font-weight:700;}
.slider-val.sage{color:var(--sage);}
.slider-val.rose{color:var(--rose);}
.slider-val.lav{color:var(--lavender);}
.gradient-track-wrap{position:relative;padding:8px 0;}
input[type=range]{-webkit-appearance:none;appearance:none;width:100%;height:6px;border-radius:3px;outline:none;cursor:pointer;background:transparent;margin:0;}
input[type=range]::-webkit-slider-runnable-track{height:6px;border-radius:3px;}
input[type=range]::-moz-range-track{height:6px;border-radius:3px;}
input[type=range]::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;width:20px;height:20px;border-radius:50%;background:white;box-shadow:0 2px 6px rgba(0,0,0,.2);border:2px solid currentColor;margin-top:-7px;cursor:pointer;}
input[type=range]::-moz-range-thumb{width:20px;height:20px;border-radius:50%;background:white;box-shadow:0 2px 6px rgba(0,0,0,.2);border:2px solid currentColor;cursor:pointer;}
.sage-range{background:linear-gradient(to right,#dbecd1,#5a8a6a);}
.sage-range::-webkit-slider-thumb{border-color:var(--sage);color:var(--sage);}
.sage-range::-moz-range-thumb{border-color:var(--sage);}
.rose-range{background:linear-gradient(to right,#fde8eb,#e05c6e);}
.rose-range::-webkit-slider-thumb{border-color:var(--rose);color:var(--rose);}
.rose-range::-moz-range-thumb{border-color:var(--rose);}
.lav-range{background:linear-gradient(to right,#e5e0f5,#7c6fa0);}
.lav-range::-webkit-slider-thumb{border-color:var(--lavender);color:var(--lavender);}
.lav-range::-moz-range-thumb{border-color:var(--lavender);}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   JOURNAL (Interactive)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.prompt-card{background:var(--gold-light);border:1px solid rgba(201,151,42,.25);border-radius:var(--r-md);padding:14px 16px;margin-bottom:14px;}
.prompt-tag{font-size:10px;font-weight:700;text-transform:uppercase;letter-spacing:1px;color:var(--gold);}
.prompt-text{font-family:var(--font-display);font-size:14px;font-style:italic;color:var(--ink);line-height:1.5;margin-top:6px;}
.journal-area{background:var(--card);border-radius:var(--r-lg);border:1px solid var(--border);overflow:hidden;margin-bottom:14px;}
.journal-toolbar{display:flex;gap:2px;padding:8px 10px;border-bottom:1px solid var(--border);background:var(--screen-bg2);}
.toolbar-btn{width:30px;height:28px;border-radius:var(--r-xs);display:flex;align-items:center;justify-content:center;font-size:12px;font-weight:700;color:var(--ink-mid);cursor:pointer;transition:background .1s;user-select:none;}
.toolbar-btn:active{background:var(--border);}
.journal-textarea{width:100%;padding:14px 16px;font-family:var(--font-body);font-size:14px;color:var(--ink);line-height:1.65;min-height:150px;border:none;outline:none;background:transparent;resize:none;display:block;}
.journal-footer{display:flex;align-items:center;justify-content:space-between;padding:8px 14px;border-top:1px solid var(--border);background:var(--screen-bg2);}
.word-count{font-size:11px;color:var(--ink-ghost);}
.voice-btn{display:flex;align-items:center;gap:5px;background:var(--teal-light);border:1px solid rgba(42,157,143,.2);border-radius:var(--r-full);padding:6px 12px;font-size:12px;font-weight:600;color:var(--teal);cursor:pointer;transition:all .15s;}
.voice-btn:active{background:var(--teal);color:white;}
.past-entry-item{padding:12px 16px;border-bottom:1px solid var(--border);cursor:pointer;transition:background .1s;}
.past-entry-item:hover{background:var(--screen-bg2);}
.past-entry-item:last-child{border-bottom:none;}
.past-entry-date{font-size:11px;font-weight:700;color:var(--ink-soft);text-transform:uppercase;letter-spacing:.5px;margin-bottom:3px;}
.past-entry-preview{font-size:13px;color:var(--ink-mid);line-height:1.4;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   INSIGHTS (Interactive Charts)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.period-selector{display:flex;gap:6px;margin-bottom:16px;}
.period-btn{flex:1;height:32px;border-radius:var(--r-sm);display:flex;align-items:center;justify-content:center;font-size:12px;font-weight:700;cursor:pointer;border:1.5px solid var(--border);background:var(--card);color:var(--ink-mid);transition:all .15s;user-select:none;}
.period-btn:active{transform:scale(.94);}
.period-btn.active{background:var(--blue);border-color:var(--blue);color:white;box-shadow:0 4px 12px rgba(42,109,181,.3);}
.chart-card{background:var(--card);border-radius:var(--r-lg);border:1px solid var(--border);overflow:hidden;margin-bottom:12px;box-shadow:0 1px 3px rgba(0,0,0,.05);}
.chart-card-header{display:flex;align-items:center;justify-content:space-between;padding:14px 16px 8px;}
.chart-title{font-size:14px;font-weight:700;color:var(--ink);}
.chart-legend{display:flex;gap:10px;}
.legend-item{display:flex;align-items:center;gap:4px;font-size:10px;color:var(--ink-soft);}
.legend-dot{width:8px;height:8px;border-radius:50%;}
.chart-container{padding:4px 16px 14px;position:relative;}
.chart-tooltip{position:absolute;background:var(--ink);color:white;border-radius:8px;padding:6px 10px;font-size:12px;font-weight:700;pointer-events:none;transform:translate(-50%,-100%);white-space:nowrap;box-shadow:0 4px 12px rgba(0,0,0,.3);transition:opacity .15s;}
.chart-tooltip::after{content:'';position:absolute;top:100%;left:50%;transform:translateX(-50%);border:5px solid transparent;border-top-color:var(--ink);}
.chart-tooltip.hidden{opacity:0;}
.insight-alert{background:#e8f6f4;border:1px solid rgba(42,157,143,.25);border-radius:var(--r-md);padding:12px 16px;margin-bottom:12px;display:flex;gap:10px;align-items:flex-start;}
.insight-alert-icon{width:28px;height:28px;border-radius:8px;background:var(--teal);display:flex;align-items:center;justify-content:center;font-size:14px;flex-shrink:0;}
.insight-alert-title{font-size:13px;font-weight:700;color:#1a4a44;margin-bottom:3px;}
.insight-alert-text{font-size:12px;color:#2d6b64;line-height:1.4;}
.corr-card{background:var(--card);border-radius:var(--r-lg);border:1px solid var(--border);padding:14px 16px;margin-bottom:12px;}
.corr-title{font-size:12px;font-weight:700;text-transform:uppercase;letter-spacing:.5px;color:var(--ink-soft);margin-bottom:10px;}
.corr-row{display:flex;align-items:center;gap:10px;margin-bottom:8px;}
.corr-label{font-size:12px;color:var(--ink-mid);width:84px;flex-shrink:0;}
.corr-bar-track{flex:1;height:8px;background:var(--border);border-radius:4px;overflow:hidden;cursor:pointer;}
.corr-bar-fill{height:100%;border-radius:4px;transition:width .6s cubic-bezier(.34,1.56,.64,1);}
.corr-val{font-size:12px;font-weight:700;width:28px;text-align:right;}
.share-btn{background:var(--teal);border-radius:var(--r-md);padding:14px 20px;display:flex;align-items:center;justify-content:center;gap:8px;font-size:14px;font-weight:700;color:white;cursor:pointer;margin-bottom:12px;transition:all .2s;box-shadow:0 4px 14px rgba(42,157,143,.35);}
.share-btn:active{transform:scale(.97);opacity:.9;}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   ANNOTATION PANEL
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.ann-panel{width:270px;align-self:flex-start;position:sticky;top:32px;}
.ann-title{font-family:var(--font-display);font-size:22px;font-weight:400;color:rgba(240,237,232,.9);letter-spacing:-.3px;margin-bottom:4px;line-height:1.2;}
.ann-sub{font-size:12px;color:rgba(240,237,232,.35);margin-bottom:20px;}
.ann-card{background:rgba(255,255,255,.05);border:1px solid rgba(255,255,255,.08);border-radius:var(--r-md);padding:14px;margin-bottom:8px;animation:annIn .25s ease both;}
@keyframes annIn{from{opacity:0;transform:translateY(6px);}to{opacity:1;transform:translateY(0);}}
.ann-tag{display:inline-block;font-size:9px;font-weight:700;text-transform:uppercase;letter-spacing:1.2px;padding:3px 8px;border-radius:var(--r-full);margin-bottom:7px;}
.ann-tag.new{background:rgba(42,157,143,.2);color:#52b9ae;}
.ann-tag.improved{background:rgba(108,150,255,.2);color:#8aabff;}
.ann-tag.live{background:rgba(245,200,66,.2);color:#f0c040;}
.ann-text{font-size:12.5px;color:rgba(240,237,232,.6);line-height:1.55;}
.ann-text strong{color:rgba(240,237,232,.9);font-weight:600;}
.sdot-nav{display:flex;gap:6px;margin-top:20px;flex-wrap:wrap;}
.sdot{width:7px;height:7px;border-radius:50%;background:rgba(255,255,255,.14);cursor:pointer;transition:all .2s;}
.sdot.active{width:22px;border-radius:4px;background:rgba(240,237,232,.75);}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SETTINGS SCREEN
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.settings-hero{padding:10px 24px 20px;background:linear-gradient(160deg,#1c1c28 0%,#0e0e18 100%);flex-shrink:0;}
.settings-hero-title{font-family:var(--font-display);font-size:24px;font-weight:300;color:#e8eaf6;margin-bottom:4px;letter-spacing:-.4px;}
.settings-hero-sub{font-size:12px;color:rgba(232,234,246,.4);}
.settings-section-label{font-size:11px;font-weight:700;text-transform:uppercase;letter-spacing:1.2px;color:var(--ink-soft);margin:18px 0 8px;}
.settings-row{display:flex;align-items:center;justify-content:space-between;padding:13px 18px;border-bottom:1px solid var(--border);background:var(--card);}
.settings-row:last-child{border-bottom:none;}
.settings-row-left{display:flex;align-items:center;gap:12px;}
.settings-row-icon{width:32px;height:32px;border-radius:9px;display:flex;align-items:center;justify-content:center;font-size:16px;flex-shrink:0;}
.settings-row-label{font-size:14px;font-weight:600;color:var(--ink);}
.settings-row-sub{font-size:12px;color:var(--ink-soft);margin-top:1px;}
.settings-row-right{display:flex;align-items:center;gap:8px;}
.settings-value{font-size:13px;color:var(--ink-ghost);}
.settings-chevron{font-size:14px;color:var(--ink-ghost);}
.clinician-card{background:var(--card);border:1px solid var(--border);border-radius:var(--r-lg);overflow:hidden;margin-bottom:10px;}
.clinician-connected{padding:14px 18px;display:flex;align-items:center;gap:12px;}
.clinician-avatar{width:40px;height:40px;border-radius:12px;background:linear-gradient(135deg,#2a9d8f,#1a6d64);display:flex;align-items:center;justify-content:center;font-size:18px;color:white;font-family:var(--font-display);}
.clinician-name{font-size:14px;font-weight:700;color:var(--ink);}
.clinician-role{font-size:12px;color:var(--ink-soft);}
.clinician-status{margin-left:auto;font-size:11px;font-weight:700;padding:4px 10px;border-radius:var(--r-full);background:var(--teal-light);color:var(--teal);}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   ANIMATIONS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
@keyframes screenSlideIn{from{opacity:0;transform:translateX(12px);}to{opacity:1;transform:translateX(0);}}
.screen.active{animation:screenSlideIn .25s ease both;}

/* Toast notification */
.toast{position:absolute;bottom:96px;left:50%;transform:translateX(-50%) translateY(20px);background:var(--ink);color:white;border-radius:var(--r-md);padding:10px 16px;font-size:13px;font-weight:600;white-space:nowrap;box-shadow:0 8px 24px rgba(0,0,0,.4);z-index:200;pointer-events:none;opacity:0;transition:all .3s;}
.toast.show{opacity:1;transform:translateX(-50%) translateY(0);}
</style>
</head>
<body>

<div class="page-header">
  <div class="page-title">Mind<em>Log</em></div>
  <div class="page-subtitle">Interactive prototype v2 Â· All interactions live</div>
</div>

<div class="screen-nav">
  <button class="nav-btn active" onclick="goScreen('onboard1')">âœ¦ Onboarding</button>
  <button class="nav-btn" onclick="goScreen('today')">â‘  Today</button>
  <button class="nav-btn" onclick="goScreen('wellness')">â‘¡ Wellness</button>
  <button class="nav-btn" onclick="goScreen('triggers')">â‘¢ Triggers</button>
  <button class="nav-btn" onclick="goScreen('symptoms')">â‘£ Symptoms</button>
  <button class="nav-btn" onclick="goScreen('journal')">â‘¤ Journal</button>
  <button class="nav-btn" onclick="goScreen('insights')">â‘¥ Insights</button>
  <button class="nav-btn" onclick="goScreen('assessments')">â‘¦ Assessments</button>
  <button class="nav-btn" onclick="goScreen('medications')">â‘§ Medications</button>
  <button class="nav-btn" onclick="goScreen('settings')">âš™ Settings</button>
</div>

<div class="phone-stage">
  <div class="phone-wrapper">
    <div class="phone-shell">
      <div class="phone-screen" id="phoneScreen">
        <div class="dynamic-island"></div>

        <!-- STATUS BAR -->
        <div class="status-bar">
          <span class="status-time" id="statusTime">9:41</span>
          <div class="status-icons">
            <svg width="17" height="12" viewBox="0 0 17 12" fill="none"><rect x="0" y="3" width="3" height="9" rx="1" fill="#1a1714"/><rect x="4.5" y="2" width="3" height="10" rx="1" fill="#1a1714"/><rect x="9" y="0" width="3" height="12" rx="1" fill="#1a1714"/><rect x="13.5" y="0" width="3" height="12" rx="1" fill="#1a1714" opacity="0.3"/></svg>
            <svg width="16" height="12" viewBox="0 0 16 12" fill="#1a1714"><path d="M8 2C10.7 2 13.1 3.2 14.7 5.1L16 3.7C14 1.4 11.1 0 8 0C4.9 0 2 1.4 0 3.7L1.3 5.1C2.9 3.2 5.3 2 8 2Z"/><path d="M8 5C9.9 5 11.6 5.8 12.8 7.1L14.1 5.7C12.5 4.1 10.4 3 8 3C5.6 3 3.5 4.1 1.9 5.7L3.2 7.1C4.4 5.8 6.1 5 8 5Z"/><circle cx="8" cy="10" r="2"/></svg>
            <svg width="25" height="12" viewBox="0 0 25 12" fill="none"><rect x="0.5" y="0.5" width="21" height="11" rx="3.5" stroke="#1a1714" stroke-opacity="0.35"/><rect x="2" y="2" width="16" height="8" rx="2" fill="#1a1714"/><path d="M23 4V8C23.8 7.7 24.5 7 24.5 6C24.5 5 23.8 4.3 23 4Z" fill="#1a1714" opacity="0.4"/></svg>
          </div>
        </div>

        <!-- â—†â—†â—† ONBOARDING 1: WELCOME â—†â—†â—† -->
        <div class="screen active" id="s-onboard1" style="padding:0;">
          <div class="ob-welcome">
            <div class="ob-logo-area">
              <div class="ob-app-icon">ğŸŒ¿</div>
              <div class="ob-app-name">Mind<em>Log</em></div>
              <div class="ob-tagline">Your daily mental wellness companion. Track, reflect, and discover what keeps you well.</div>
            </div>
            <div class="ob-bottom">
              <div class="ob-btn-primary" onclick="goScreen('onboard2')">Get Started â†’</div>
              <div class="ob-btn-secondary" onclick="goScreen('onboard2')">I already have an account</div>
            </div>
          </div>
        </div>

        <!-- â—†â—†â—† ONBOARDING 2: FEATURE SLIDES â—†â—†â—† -->
        <div class="screen" id="s-onboard2">
          <div class="ob-slides-screen" style="flex:1;display:flex;flex-direction:column;background:var(--screen-bg);">
            <div class="ob-slide-content" id="obSlideContent">
              <!-- JS fills in -->
            </div>
            <div class="ob-dots" id="obSlideDots"></div>
            <div class="ob-slide-nav">
              <div class="ob-skip" onclick="goScreen('onboard3')" id="obSkipBtn">Skip</div>
              <div class="ob-btn-primary" onclick="obNextSlide()" id="obNextBtn">Next â†’</div>
            </div>
          </div>
        </div>

        <!-- â—†â—†â—† ONBOARDING 3: MEDICATIONS â—†â—†â—† -->
        <div class="screen" id="s-onboard3">
          <div class="ob-setup" style="flex:1;display:flex;flex-direction:column;">
            <div class="ob-progress-bar"><div class="ob-progress-fill" style="width:33%"></div></div>
            <div class="ob-setup-header">
              <div class="ob-setup-step">Step 1 of 3</div>
              <div class="ob-setup-title">Your Medications</div>
              <div class="ob-setup-sub">Add any medications you take. We'll remind you to log them each day.</div>
            </div>
            <div class="ob-setup-body" id="medList">
              <!-- chips rendered by JS -->
            </div>
            <div style="padding:0 24px 8px;">
              <div class="ob-input-row" id="medInputRow" style="display:none;">
                <input class="ob-input" id="medNameInput" placeholder="e.g. Lamotrigine 100mg" onkeydown="if(event.key==='Enter')addMed()">
                <button class="ob-input-btn" onclick="addMed()">Add</button>
              </div>
              <div class="ob-add-med" onclick="showMedInput()">
                <div class="ob-add-med-icon">ï¼‹</div>
                <div class="ob-add-med-text">Add medication</div>
              </div>
            </div>
            <div style="padding:16px 24px 28px;">
              <div class="ob-btn-primary" onclick="goScreen('onboard4')" style="background:var(--teal);">Continue â†’</div>
              <div style="text-align:center;margin-top:10px;font-size:13px;color:var(--ink-ghost);cursor:pointer;" onclick="goScreen('onboard4')">Skip for now</div>
            </div>
          </div>
        </div>

        <!-- â—†â—†â—† ONBOARDING 4: NOTIFICATIONS â—†â—†â—† -->
        <div class="screen" id="s-onboard4">
          <div class="ob-progress-bar"><div class="ob-progress-fill" style="width:66%"></div></div>
          <div class="scroll-area" style="display:flex;flex-direction:column;">
            <div class="ob-notif">
              <div class="ob-notif-visual">ğŸ””</div>
              <div style="font-family:var(--font-display);font-size:26px;font-weight:400;color:var(--ink);letter-spacing:-.4px;margin-bottom:8px;">Daily reminders</div>
              <div style="font-size:14px;color:var(--ink-mid);line-height:1.6;max-width:270px;">A gentle nudge each evening helps build the tracking habit. You can change the time anytime.</div>
              <div class="notif-preview">
                <div class="notif-preview-header">
                  <div class="notif-app-icon">ğŸŒ¿</div>
                  <span class="notif-app-name">MindLog</span>
                  <span class="notif-time">8:00 PM</span>
                </div>
                <div class="notif-title">Time for your daily check-in</div>
                <div class="notif-body">How was your day? It only takes 60 seconds.</div>
              </div>
              <div style="width:100%;background:var(--screen-bg2);border:1px solid var(--border);border-radius:var(--r-md);padding:12px 16px;display:flex;align-items:center;justify-content:space-between;margin-bottom:8px;">
                <span style="font-size:14px;font-weight:600;color:var(--ink);">Reminder time</span>
                <span style="font-size:14px;font-weight:700;color:var(--teal);">8:00 PM â€º</span>
              </div>
              <div class="ob-btn-primary" onclick="goScreen('onboard5')" style="width:100%;background:var(--teal);">Allow Notifications</div>
              <div style="margin-top:10px;font-size:13px;color:var(--ink-ghost);cursor:pointer;" onclick="goScreen('onboard5')">Not now</div>
            </div>
          </div>
        </div>

        <!-- â—†â—†â—† ONBOARDING 5: ALL SET â—†â—†â—† -->
        <div class="screen" id="s-onboard5">
          <div class="ob-progress-bar"><div class="ob-progress-fill" style="width:100%"></div></div>
          <div style="flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:40px 32px;text-align:center;background:var(--screen-bg);">
            <div style="width:90px;height:90px;border-radius:24px;background:linear-gradient(135deg,#2a9d8f,#1a6d64);display:flex;align-items:center;justify-content:center;font-size:44px;box-shadow:0 20px 40px rgba(42,157,143,.35);margin-bottom:28px;animation:iconFloat 3s ease-in-out infinite;">âœ“</div>
            <div style="font-family:var(--font-display);font-size:32px;font-weight:400;color:var(--ink);letter-spacing:-.5px;margin-bottom:12px;">You're all set.</div>
            <div style="font-size:15px;color:var(--ink-mid);line-height:1.65;max-width:280px;margin-bottom:32px;">Your first check-in takes about 60 seconds. You can always add more detail as you go.</div>
            <div style="width:100%;display:flex;flex-direction:column;gap:10px;">
              <div class="ob-btn-primary" onclick="goScreen('today')" style="background:var(--teal);">Start my first check-in â†’</div>
            </div>
          </div>
        </div>

        <!-- â—†â—†â—† TODAY â—†â—†â—† -->
        <div class="screen" id="s-today">
          <div class="today-header">
            <div class="today-greeting">Good morning,<br>here's your check-in</div>
            <div class="today-date-label" id="todayDateLabel">Friday, 20 February 2026</div>
            <div class="completion-row">
              <div class="ring-wrapper">
                <svg style="transform:rotate(-90deg)" width="64" height="64" viewBox="0 0 64 64">
                  <circle cx="32" cy="32" r="26" fill="none" stroke="rgba(255,255,255,.12)" stroke-width="5"/>
                  <circle id="ringArc" cx="32" cy="32" r="26" fill="none" stroke="#52b9ae" stroke-width="5" stroke-dasharray="163.4" stroke-dashoffset="57" stroke-linecap="round" style="transition:stroke-dashoffset .6s ease;"/>
                </svg>
                <div class="ring-text">
                  <div class="ring-pct" id="ringPct">65%</div>
                  <div class="ring-pct-label">done</div>
                </div>
              </div>
              <div class="completion-details">
                <div class="completion-item"><div class="completion-dot" style="background:#52b9ae;"></div><div class="completion-text"><strong>Core Data</strong> complete âœ“</div></div>
                <div class="completion-item"><div class="completion-dot" style="background:#f0943e;"></div><div class="completion-text"><strong id="wellnessDoneCount">4</strong> of 13 wellness logged</div></div>
                <div class="completion-item"><div class="completion-dot" style="background:rgba(255,255,255,.2);"></div><div class="completion-text">Triggers not started</div></div>
              </div>
            </div>
          </div>

          <div class="scroll-area">
            <!-- MOOD -->
            <div class="section-head-label">Your Mood</div>
            <div class="entry-card">
              <div class="entry-card-header">
                <div class="entry-card-title">
                  <div class="entry-card-icon" style="background:#fef3ea;">ğŸ˜Š</div>
                  <span class="entry-card-name">How are you feeling?</span>
                </div>
                <span class="status-badge" id="moodBadge" style="background:#e8f6f4;color:#2a9d8f;">7 Â· Good</span>
              </div>
              <div class="mood-ring" id="moodRing">
                <!-- JS fills -->
              </div>
            </div>

            <!-- COPING -->
            <div class="entry-card">
              <div class="entry-card-header">
                <div class="entry-card-title">
                  <div class="entry-card-icon" style="background:#eef5f0;">ğŸ§ </div>
                  <span class="entry-card-name">How well did you cope?</span>
                </div>
                <span class="status-badge" id="copingBadge" style="background:#e8f6f4;color:#2a9d8f;">6 Â· OK</span>
              </div>
              <div class="mood-ring" id="copingRing">
                <!-- JS fills -->
              </div>
            </div>

            <!-- SLEEP -->
            <div class="section-head-label">Sleep</div>
            <div class="entry-card">
              <div class="entry-card-header">
                <div class="entry-card-title">
                  <div class="entry-card-icon" style="background:#f2f0f8;">ğŸ’¤</div>
                  <span class="entry-card-name">Last night's sleep</span>
                </div>
                <span class="status-badge" id="sleepBadge" style="background:#f2f0f8;color:#7c6fa0;">7h 30m</span>
              </div>
              <div class="sleep-display">
                <div class="sleep-big">
                  <div class="sleep-num" style="color:#7c6fa0;" id="sleepHourDisplay">7<span style="font-size:16px;color:var(--ink-soft);">h</span></div>
                  <div class="sleep-unit">hours</div>
                </div>
                <div style="width:1px;height:50px;background:var(--border);flex-shrink:0;"></div>
                <div class="sleep-stepper-group">
                  <div class="sleep-stepper">
                    <div class="stepper-minus" onclick="adjustSleep('h',-1)">âˆ’</div>
                    <div class="stepper-val" id="sleepHrs">7</div>
                    <div class="stepper-plus" onclick="adjustSleep('h',1)">+</div>
                  </div>
                  <div class="stepper-label">Hours</div>
                  <div class="sleep-stepper" style="margin-top:6px;">
                    <div class="stepper-minus" onclick="adjustSleep('m',-15)">âˆ’</div>
                    <div class="stepper-val" id="sleepMins">30</div>
                    <div class="stepper-plus" onclick="adjustSleep('m',15)">+</div>
                  </div>
                  <div class="stepper-label">Minutes</div>
                </div>
              </div>
            </div>

            <!-- EXERCISE -->
            <div class="section-head-label">Exercise</div>
            <div class="entry-card">
              <div class="entry-card-header">
                <div class="entry-card-title">
                  <div class="entry-card-icon" style="background:#eef5f0;">ğŸƒ</div>
                  <span class="entry-card-name">Exercise today</span>
                </div>
                <span class="status-badge" id="exerciseBadge" style="background:#eef5f0;color:#5a8a6a;">30 min</span>
              </div>
              <div class="exercise-presets">
                <div class="preset-btn" onclick="setExercise(this,15)">15m</div>
                <div class="preset-btn active" onclick="setExercise(this,30)">30m</div>
                <div class="preset-btn" onclick="setExercise(this,60)">60m</div>
                <div class="preset-btn" onclick="setExercise(this,90)">90m</div>
                <div class="preset-btn" onclick="setExercise(this,0)">None</div>
              </div>
            </div>

            <!-- MEDICINE -->
            <div class="section-head-label">Medicine</div>
            <div class="entry-card" id="medCards">
              <!-- JS fills from med list -->
            </div>
          </div>

          <div class="tab-bar" id="tabToday">
            <div class="tab-item active" onclick="goScreen('today')"><div class="tab-icon">ğŸ“‹</div><span class="tab-label">Today</span></div>
            <div class="tab-item" onclick="goScreen('wellness')"><div class="tab-icon">ğŸ›¡ï¸</div><span class="tab-label">Wellness</span></div>
            <div class="tab-item" onclick="goScreen('triggers')"><div class="tab-icon">âš¡</div><span class="tab-label">Triggers</span></div>
            <div class="tab-item" onclick="goScreen('symptoms')"><div class="tab-icon">ğŸ’­</div><span class="tab-label">Symptoms</span></div>
            <div class="tab-item" onclick="goScreen('journal')"><div class="tab-icon">âœï¸</div><span class="tab-label">Journal</span></div>
            <div class="tab-item" onclick="goScreen('insights')"><div class="tab-icon">ğŸ“ˆ</div><span class="tab-label">Insights</span></div>
          </div>
          <div class="toast" id="toast"></div>
        </div>

        <!-- â—†â—†â—† WELLNESS â—†â—†â—† -->
        <div class="screen" id="s-wellness">
          <div class="wellness-header">
            <div class="screen-header-top"><div class="screen-header-back" onclick="goScreen('today')">â† Today</div><div class="screen-header-date">Fri 20 Feb</div></div>
            <div class="screen-header-title">Stay Well Strategies</div>
            <div class="screen-header-sub">Track what keeps you well today</div>
            <div class="header-stat-row">
              <div class="header-stat"><div class="header-stat-num" style="color:#7ec8a0;" id="wDone">4</div><div class="header-stat-label">Done</div></div>
              <div class="header-stat"><div class="header-stat-num" style="color:#f09ba6;" id="wNo">2</div><div class="header-stat-label">Didn't</div></div>
              <div class="header-stat"><div class="header-stat-num" id="wNA">7</div><div class="header-stat-label">N/A</div></div>
            </div>
          </div>
          <div class="date-strip"><div class="date-arrow" onclick="shiftDate(-1)">â€¹</div><div><div class="date-label-day" id="wDateLabel">Friday, 20 February</div><div class="date-label-full">Tap arrow to navigate days</div></div><div class="date-arrow" onclick="shiftDate(1)">â€º</div></div>
          <div class="scroll-area" id="wellnessScrollArea">
            <!-- JS renders -->
          </div>
          <div class="tab-bar">
            <div class="tab-item" onclick="goScreen('today')"><div class="tab-icon">ğŸ“‹</div><span class="tab-label">Today</span></div>
            <div class="tab-item active" onclick="goScreen('wellness')"><div class="tab-icon">ğŸ›¡ï¸</div><span class="tab-label">Wellness</span></div>
            <div class="tab-item" onclick="goScreen('triggers')"><div class="tab-icon">âš¡</div><span class="tab-label">Triggers</span></div>
            <div class="tab-item" onclick="goScreen('symptoms')"><div class="tab-icon">ğŸ’­</div><span class="tab-label">Symptoms</span></div>
            <div class="tab-item" onclick="goScreen('journal')"><div class="tab-icon">âœï¸</div><span class="tab-label">Journal</span></div>
            <div class="tab-item" onclick="goScreen('insights')"><div class="tab-icon">ğŸ“ˆ</div><span class="tab-label">Insights</span></div>
          </div>
        </div>

        <!-- â—†â—†â—† TRIGGERS â—†â—†â—† -->
        <div class="screen" id="s-triggers">
          <div class="triggers-header">
            <div class="screen-header-top"><div class="screen-header-back" onclick="goScreen('today')">â† Today</div><div class="screen-header-date">Fri 20 Feb</div></div>
            <div class="screen-header-title">Triggers</div>
            <div class="screen-header-sub">What's affecting you today?</div>
            <div class="header-stat-row">
              <div class="header-stat"><div class="header-stat-num" style="color:#f09ba6;" id="tActive">3</div><div class="header-stat-label">Active</div></div>
              <div class="header-stat"><div class="header-stat-num" id="tNA">15</div><div class="header-stat-label">N/A</div></div>
              <div class="header-stat"><div class="header-stat-num" style="color:#c09020;" id="tAvg">6.2</div><div class="header-stat-label">Avg Severity</div></div>
            </div>
          </div>
          <div class="date-strip"><div class="date-arrow" onclick="shiftDate(-1)">â€¹</div><div><div class="date-label-day" id="tDateLabel">Friday, 20 February</div></div><div class="date-arrow" onclick="shiftDate(1)">â€º</div></div>
          <div class="scroll-area" id="triggersScrollArea"></div>
          <div class="tab-bar">
            <div class="tab-item" onclick="goScreen('today')"><div class="tab-icon">ğŸ“‹</div><span class="tab-label">Today</span></div>
            <div class="tab-item" onclick="goScreen('wellness')"><div class="tab-icon">ğŸ›¡ï¸</div><span class="tab-label">Wellness</span></div>
            <div class="tab-item active" onclick="goScreen('triggers')"><div class="tab-icon">âš¡</div><span class="tab-label">Triggers</span></div>
            <div class="tab-item" onclick="goScreen('symptoms')"><div class="tab-icon">ğŸ’­</div><span class="tab-label">Symptoms</span></div>
            <div class="tab-item" onclick="goScreen('journal')"><div class="tab-icon">âœï¸</div><span class="tab-label">Journal</span></div>
            <div class="tab-item" onclick="goScreen('insights')"><div class="tab-icon">ğŸ“ˆ</div><span class="tab-label">Insights</span></div>
          </div>
        </div>

        <!-- â—†â—†â—† SYMPTOMS â—†â—†â—† -->
        <div class="screen" id="s-symptoms">
          <div class="symptoms-header">
            <div class="screen-header-top"><div class="screen-header-back" onclick="goScreen('today')">â† Today</div><div class="screen-header-date">Fri 20 Feb</div></div>
            <div class="screen-header-title">Symptoms</div>
            <div class="screen-header-sub">How you're experiencing things right now</div>
            <div class="header-stat-row">
              <div class="header-stat"><div class="header-stat-num" style="color:#c4aee0;" id="sActive">2</div><div class="header-stat-label">Present</div></div>
              <div class="header-stat"><div class="header-stat-num" id="sNA">10</div><div class="header-stat-label">N/A</div></div>
              <div class="header-stat"><div class="header-stat-num" style="color:#c4aee0;" id="sAvg">4.5</div><div class="header-stat-label">Avg Level</div></div>
            </div>
          </div>
          <div class="date-strip"><div class="date-arrow" onclick="shiftDate(-1)">â€¹</div><div><div class="date-label-day" id="symDateLabel">Friday, 20 February</div></div><div class="date-arrow" onclick="shiftDate(1)">â€º</div></div>
          <div class="scroll-area" id="symptomsScrollArea"></div>
          <div class="tab-bar">
            <div class="tab-item" onclick="goScreen('today')"><div class="tab-icon">ğŸ“‹</div><span class="tab-label">Today</span></div>
            <div class="tab-item" onclick="goScreen('wellness')"><div class="tab-icon">ğŸ›¡ï¸</div><span class="tab-label">Wellness</span></div>
            <div class="tab-item" onclick="goScreen('triggers')"><div class="tab-icon">âš¡</div><span class="tab-label">Triggers</span></div>
            <div class="tab-item active" onclick="goScreen('symptoms')"><div class="tab-icon">ğŸ’­</div><span class="tab-label">Symptoms</span></div>
            <div class="tab-item" onclick="goScreen('journal')"><div class="tab-icon">âœï¸</div><span class="tab-label">Journal</span></div>
            <div class="tab-item" onclick="goScreen('insights')"><div class="tab-icon">ğŸ“ˆ</div><span class="tab-label">Insights</span></div>
          </div>
        </div>

        <!-- â—†â—†â—† JOURNAL â—†â—†â—† -->
        <div class="screen" id="s-journal">
          <div class="journal-header">
            <div class="screen-header-top"><div class="screen-header-back" onclick="goScreen('today')">â† Today</div><div class="screen-header-date">Fri 20 Feb</div></div>
            <div class="screen-header-title">Journal</div>
            <div class="screen-header-sub">Your private space to reflect</div>
          </div>
          <div class="date-strip"><div class="date-arrow" onclick="shiftDate(-1)">â€¹</div><div><div class="date-label-day" id="jDateLabel">Friday, 20 February</div></div><div class="date-arrow" onclick="shiftDate(1)">â€º</div></div>
          <div class="scroll-area">
            <div class="prompt-card">
              <div class="prompt-tag">âœ¨ Today's prompt</div>
              <div class="prompt-text" id="journalPrompt">"What's one small thing that went well today, even if today was hard?"</div>
            </div>
            <div class="journal-area">
              <div class="journal-toolbar">
                <div class="toolbar-btn" style="font-weight:900;">B</div>
                <div class="toolbar-btn" style="font-style:italic;">I</div>
                <div class="toolbar-btn" style="text-decoration:underline;font-size:11px;">U</div>
                <div class="toolbar-btn">â€¢ â€”</div>
                <div class="toolbar-btn">1.</div>
              </div>
              <textarea class="journal-textarea" id="journalText" placeholder="Start writing here, or use the prompt aboveâ€¦" oninput="updateWordCount()">Had a tough morning with the project deadline, but my 1:1 with Sarah went surprisingly well. She noticed I'd been quieter than usual and checked in â€” it meant a lot.

The walk at lunch helped. Even 15 minutes outside reset something.</textarea>
              <div class="journal-footer">
                <div class="word-count" id="wordCount">42 words</div>
                <div class="voice-btn">ğŸ¤ Voice</div>
              </div>
            </div>
            <div class="section-head-label">Recent Entries</div>
            <div class="card">
              <div class="past-entry-item"><div class="past-entry-date">Thu 19 Feb</div><div class="past-entry-preview">Felt the anxiety spike around 3pm again. Tried the breathing technique from last session and it helped more than expected...</div></div>
              <div class="past-entry-item"><div class="past-entry-date">Wed 18 Feb</div><div class="past-entry-preview">Good day overall. Dinner with Jamie was the highlight. Laughed properly for the first time in a while...</div></div>
              <div class="past-entry-item"><div class="past-entry-date">Tue 17 Feb</div><div class="past-entry-preview">Slept badly â€” woke at 3am again and couldn't get back. Everything felt harder as a result...</div></div>
            </div>
            <div style="margin-top:10px;background:var(--card);border:1px solid var(--border);border-radius:var(--r-md);padding:12px 16px;display:flex;align-items:center;gap:10px;cursor:pointer;" onclick="showToast('ğŸ” Search coming soon')">
              <span style="font-size:16px;color:var(--ink-ghost);">ğŸ”</span>
              <span style="font-size:14px;color:var(--ink-ghost);">Search past entriesâ€¦</span>
            </div>
          </div>
          <div class="tab-bar">
            <div class="tab-item" onclick="goScreen('today')"><div class="tab-icon">ğŸ“‹</div><span class="tab-label">Today</span></div>
            <div class="tab-item" onclick="goScreen('wellness')"><div class="tab-icon">ğŸ›¡ï¸</div><span class="tab-label">Wellness</span></div>
            <div class="tab-item" onclick="goScreen('triggers')"><div class="tab-icon">âš¡</div><span class="tab-label">Triggers</span></div>
            <div class="tab-item" onclick="goScreen('symptoms')"><div class="tab-icon">ğŸ’­</div><span class="tab-label">Symptoms</span></div>
            <div class="tab-item active" onclick="goScreen('journal')"><div class="tab-icon">âœï¸</div><span class="tab-label">Journal</span></div>
            <div class="tab-item" onclick="goScreen('insights')"><div class="tab-icon">ğŸ“ˆ</div><span class="tab-label">Insights</span></div>
          </div>
        </div>

        <!-- â—†â—†â—† INSIGHTS â—†â—†â—† -->
        <div class="screen" id="s-insights">
          <div class="insights-header">
            <div class="screen-header-top"><div class="screen-header-back" onclick="goScreen('today')">â† Today</div></div>
            <div class="screen-header-title">Insights</div>
            <div class="screen-header-sub">Patterns from your data</div>
          </div>
          <div class="scroll-area">
            <div class="period-selector">
              <div class="period-btn" onclick="setPeriod(this,'2W')">2W</div>
              <div class="period-btn active" onclick="setPeriod(this,'1M')">1M</div>
              <div class="period-btn" onclick="setPeriod(this,'3M')">3M</div>
              <div class="period-btn" onclick="setPeriod(this,'Custom')">Custom</div>
            </div>
            <div class="insight-alert">
              <div class="insight-alert-icon">ğŸ’¡</div>
              <div>
                <div class="insight-alert-title">Pattern detected</div>
                <div class="insight-alert-text" id="insightText">Your mood averages <strong>1.8 points higher</strong> on days with 30+ min exercise. You've exercised 18 of 28 days this month.</div>
              </div>
            </div>
            <div class="chart-card">
              <div class="chart-card-header">
                <div class="chart-title">Mood & Coping</div>
                <div class="chart-legend">
                  <div class="legend-item"><div class="legend-dot" style="background:#5a8a6a;"></div>Mood</div>
                  <div class="legend-item"><div class="legend-dot" style="background:#9b958e;"></div>Coped</div>
                </div>
              </div>
              <div class="chart-container" style="position:relative;">
                <canvas id="moodChart" width="330" height="110" style="width:100%;cursor:crosshair;"></canvas>
                <div class="chart-tooltip hidden" id="chartTooltip"></div>
              </div>
            </div>
            <div class="chart-card">
              <div class="chart-card-header">
                <div class="chart-title">Sleep Hours</div>
                <div class="chart-legend"><div class="legend-item"><div class="legend-dot" style="background:#7c6fa0;border-radius:2px;width:12px;height:6px;"></div>Hours</div></div>
              </div>
              <div class="chart-container">
                <canvas id="sleepChart" width="330" height="90" style="width:100%;"></canvas>
              </div>
            </div>
            <div class="corr-card">
              <div class="corr-title">What moves the needle</div>
              <div id="corrRows"></div>
              <div style="font-size:11px;color:var(--ink-ghost);margin-top:8px;">Mood score change when factor is present vs absent</div>
            </div>
            <div class="share-btn" onclick="showToast('ğŸ“„ Report generated!')">ğŸ“„ &nbsp;Generate Clinician Report</div>
          </div>
          <div class="tab-bar">
            <div class="tab-item" onclick="goScreen('today')"><div class="tab-icon">ğŸ“‹</div><span class="tab-label">Today</span></div>
            <div class="tab-item" onclick="goScreen('wellness')"><div class="tab-icon">ğŸ›¡ï¸</div><span class="tab-label">Wellness</span></div>
            <div class="tab-item" onclick="goScreen('triggers')"><div class="tab-icon">âš¡</div><span class="tab-label">Triggers</span></div>
            <div class="tab-item" onclick="goScreen('symptoms')"><div class="tab-icon">ğŸ’­</div><span class="tab-label">Symptoms</span></div>
            <div class="tab-item" onclick="goScreen('journal')"><div class="tab-icon">âœï¸</div><span class="tab-label">Journal</span></div>
            <div class="tab-item active" onclick="goScreen('insights')"><div class="tab-icon">ğŸ“ˆ</div><span class="tab-label">Insights</span></div>
          </div>
        </div>

        <!-- â—†â—†â—† SETTINGS â—†â—†â—† -->
        <div class="screen" id="s-settings">
          <div class="settings-hero">
            <div class="settings-hero-title">Settings</div>
            <div class="settings-hero-sub">Customise your MindLog experience</div>
          </div>
          <div class="scroll-area">
            <!-- Clinician -->
            <div class="section-head-label">Clinician Access</div>
            <div class="clinician-card">
              <div class="clinician-connected">
                <div class="clinician-avatar">Dr</div>
                <div><div class="clinician-name">Dr. Amelia Huang</div><div class="clinician-role">Psychiatrist Â· Royal Melbourne</div></div>
                <div class="clinician-status">Connected</div>
              </div>
              <div style="border-top:1px solid var(--border);padding:12px 18px;display:flex;justify-content:space-between;">
                <span style="font-size:13px;font-weight:600;color:var(--teal);cursor:pointer;" onclick="showToast('ğŸ“¤ Share options opened')">Share report</span>
                <span style="font-size:13px;color:var(--ink-ghost);cursor:pointer;">Manage access â€º</span>
              </div>
            </div>

            <!-- Reminders -->
            <div class="section-head-label">Notifications</div>
            <div class="card">
              <div class="settings-row">
                <div class="settings-row-left">
                  <div class="settings-row-icon" style="background:#fef3ea;">ğŸ””</div>
                  <div><div class="settings-row-label">Daily reminder</div><div class="settings-row-sub">Evening check-in prompt</div></div>
                </div>
                <div class="settings-row-right">
                  <div class="toggle-pill on" onclick="this.classList.toggle('on');this.classList.toggle('off');"><div class="knob"></div></div>
                </div>
              </div>
              <div class="settings-row" onclick="showToast('â° Time picker')">
                <div class="settings-row-left">
                  <div class="settings-row-icon" style="background:#eef5f0;">â°</div>
                  <div><div class="settings-row-label">Reminder time</div></div>
                </div>
                <div class="settings-row-right"><span class="settings-value">8:00 PM</span><span class="settings-chevron">â€º</span></div>
              </div>
              <div class="settings-row">
                <div class="settings-row-left">
                  <div class="settings-row-icon" style="background:#f2f0f8;">ğŸ’Š</div>
                  <div><div class="settings-row-label">Medicine reminders</div><div class="settings-row-sub">Morning & evening</div></div>
                </div>
                <div class="settings-row-right">
                  <div class="toggle-pill on" onclick="this.classList.toggle('on');this.classList.toggle('off');"><div class="knob"></div></div>
                </div>
              </div>
            </div>

            <!-- Privacy -->
            <div class="section-head-label">Privacy & Data</div>
            <div class="card">
              <div class="settings-row">
                <div class="settings-row-left">
                  <div class="settings-row-icon" style="background:#e8f6f4;">ğŸ”’</div>
                  <div><div class="settings-row-label">Biometric lock</div><div class="settings-row-sub">Face ID / Touch ID</div></div>
                </div>
                <div class="settings-row-right">
                  <div class="toggle-pill on" onclick="this.classList.toggle('on');this.classList.toggle('off');"><div class="knob"></div></div>
                </div>
              </div>
              <div class="settings-row">
                <div class="settings-row-left">
                  <div class="settings-row-icon" style="background:#fdf6e8;">â˜ï¸</div>
                  <div><div class="settings-row-label">Cloud sync</div><div class="settings-row-sub">iCloud Â· Encrypted</div></div>
                </div>
                <div class="settings-row-right">
                  <div class="toggle-pill off" onclick="this.classList.toggle('on');this.classList.toggle('off');"><div class="knob"></div></div>
                </div>
              </div>
              <div class="settings-row" onclick="showToast('ğŸ“¦ Export starting...')">
                <div class="settings-row-left">
                  <div class="settings-row-icon" style="background:#f2f0f8;">ğŸ“¤</div>
                  <div><div class="settings-row-label">Export all data</div><div class="settings-row-sub">JSON, CSV, or PDF</div></div>
                </div>
                <div class="settings-row-right"><span class="settings-chevron">â€º</span></div>
              </div>
            </div>

            <!-- Appearance -->
            <div class="section-head-label">Appearance</div>
            <div class="card">
              <div class="settings-row" onclick="showToast('ğŸ¨ Theme picker')">
                <div class="settings-row-left">
                  <div class="settings-row-icon" style="background:#eef5f0;">ğŸŒ™</div>
                  <div><div class="settings-row-label">Theme</div></div>
                </div>
                <div class="settings-row-right"><span class="settings-value">System</span><span class="settings-chevron">â€º</span></div>
              </div>
              <div class="settings-row" onclick="showToast('ğŸŒ Language picker')">
                <div class="settings-row-left">
                  <div class="settings-row-icon" style="background:#fef3ea;">ğŸŒ</div>
                  <div><div class="settings-row-label">Language</div></div>
                </div>
                <div class="settings-row-right"><span class="settings-value">English</span><span class="settings-chevron">â€º</span></div>
              </div>
            </div>

            <div style="text-align:center;padding:20px 0 4px;">
              <div style="font-size:12px;color:var(--ink-ghost);">MindLog v2.0.0 Â· Anthropic</div>
            </div>
          </div>
          <div class="tab-bar">
            <div class="tab-item" onclick="goScreen('today')"><div class="tab-icon">ğŸ“‹</div><span class="tab-label">Today</span></div>
            <div class="tab-item" onclick="goScreen('wellness')"><div class="tab-icon">ğŸ›¡ï¸</div><span class="tab-label">Wellness</span></div>
            <div class="tab-item" onclick="goScreen('triggers')"><div class="tab-icon">âš¡</div><span class="tab-label">Triggers</span></div>
            <div class="tab-item" onclick="goScreen('symptoms')"><div class="tab-icon">ğŸ’­</div><span class="tab-label">Symptoms</span></div>
            <div class="tab-item" onclick="goScreen('journal')"><div class="tab-icon">âœï¸</div><span class="tab-label">Journal</span></div>
            <div class="tab-item" onclick="goScreen('insights')"><div class="tab-icon">ğŸ“ˆ</div><span class="tab-label">Insights</span></div>
          </div>
        </div>

        <!-- â—†â—†â—† ASSESSMENTS â—†â—†â—† -->
        <div class="screen" id="s-assessments">
          <div style="padding:12px 24px 18px;background:linear-gradient(150deg,#1e2a3a 0%,#101820 100%);flex-shrink:0;position:relative;overflow:hidden;">
            <div class="screen-header-top"><div class="screen-header-back" onclick="goScreen('today')">â† Today</div></div>
            <div class="screen-header-title">Assessments</div>
            <div class="screen-header-sub">Weekly validated scales</div>
          </div>
          <div class="scroll-area">
            <div class="section-head-label">This Week</div>
            <div class="card" id="assessmentsList">
              <div style="padding:14px 18px;border-bottom:1px solid var(--border);display:flex;align-items:center;justify-content:space-between;cursor:pointer;" onclick="startAssessment('phq9')">
                <div style="display:flex;align-items:center;gap:12px;">
                  <div style="width:36px;height:36px;border-radius:10px;background:linear-gradient(135deg,#6ea8fe,#4a8eee);display:flex;align-items:center;justify-content:center;font-size:16px;">ğŸ“‹</div>
                  <div>
                    <div style="font-size:14px;font-weight:700;color:var(--ink);">PHQ-9</div>
                    <div style="font-size:12px;color:var(--ink-soft);">Depression severity Â· 9 questions</div>
                  </div>
                </div>
                <div style="display:flex;align-items:center;gap:8px;">
                  <span style="font-size:11px;font-weight:600;padding:3px 9px;border-radius:999px;background:#e8f6f4;color:#2a9d8f;">Due</span>
                  <span style="font-size:14px;color:var(--ink-ghost);">â€º</span>
                </div>
              </div>
              <div style="padding:14px 18px;border-bottom:1px solid var(--border);display:flex;align-items:center;justify-content:space-between;cursor:pointer;" onclick="startAssessment('gad7')">
                <div style="display:flex;align-items:center;gap:12px;">
                  <div style="width:36px;height:36px;border-radius:10px;background:linear-gradient(135deg,#f59e0b,#e07a1a);display:flex;align-items:center;justify-content:center;font-size:16px;">ğŸ˜°</div>
                  <div>
                    <div style="font-size:14px;font-weight:700;color:var(--ink);">GAD-7</div>
                    <div style="font-size:12px;color:var(--ink-soft);">Anxiety severity Â· 7 questions</div>
                  </div>
                </div>
                <div style="display:flex;align-items:center;gap:8px;">
                  <span style="font-size:11px;font-weight:600;padding:3px 9px;border-radius:999px;background:#e8f6f4;color:#2a9d8f;">Due</span>
                  <span style="font-size:14px;color:var(--ink-ghost);">â€º</span>
                </div>
              </div>
              <div style="padding:14px 18px;border-bottom:1px solid var(--border);display:flex;align-items:center;justify-content:space-between;cursor:pointer;" onclick="startAssessment('isi')">
                <div style="display:flex;align-items:center;gap:12px;">
                  <div style="width:36px;height:36px;border-radius:10px;background:linear-gradient(135deg,#7c6fa0,#5a4f80);display:flex;align-items:center;justify-content:center;font-size:16px;">ğŸ˜´</div>
                  <div>
                    <div style="font-size:14px;font-weight:700;color:var(--ink);">ISI</div>
                    <div style="font-size:12px;color:var(--ink-soft);">Insomnia severity Â· 7 questions</div>
                  </div>
                </div>
                <div style="display:flex;align-items:center;gap:8px;">
                  <span style="font-size:11px;font-weight:600;padding:3px 9px;border-radius:999px;background:var(--border);color:var(--ink-soft);">3 days</span>
                  <span style="font-size:14px;color:var(--ink-ghost);">â€º</span>
                </div>
              </div>
              <div style="padding:14px 18px;border-bottom:1px solid var(--border);display:flex;align-items:center;justify-content:space-between;cursor:pointer;" onclick="startAssessment('asrm')">
                <div style="display:flex;align-items:center;gap:12px;">
                  <div style="width:36px;height:36px;border-radius:10px;background:linear-gradient(135deg,#f59e0b,#c9972a);display:flex;align-items:center;justify-content:center;font-size:16px;">âš¡</div>
                  <div>
                    <div style="font-size:14px;font-weight:700;color:var(--ink);">ASRM</div>
                    <div style="font-size:12px;color:var(--ink-soft);">Mania self-rating Â· 5 questions</div>
                  </div>
                </div>
                <div style="display:flex;align-items:center;gap:8px;">
                  <span style="font-size:11px;font-weight:600;padding:3px 9px;border-radius:999px;background:var(--border);color:var(--ink-soft);">5 days</span>
                  <span style="font-size:14px;color:var(--ink-ghost);">â€º</span>
                </div>
              </div>
              <div style="padding:14px 18px;display:flex;align-items:center;justify-content:space-between;cursor:pointer;" onclick="startAssessment('cssrs')">
                <div style="display:flex;align-items:center;gap:12px;">
                  <div style="width:36px;height:36px;border-radius:10px;background:linear-gradient(135deg,#e05c6e,#c04050);display:flex;align-items:center;justify-content:center;font-size:16px;">âš ï¸</div>
                  <div>
                    <div style="font-size:14px;font-weight:700;color:var(--ink);">C-SSRS</div>
                    <div style="font-size:12px;color:var(--ink-soft);">Safety screening Â· 6 questions</div>
                  </div>
                </div>
                <div style="display:flex;align-items:center;gap:8px;">
                  <span style="font-size:11px;font-weight:600;padding:3px 9px;border-radius:999px;background:#e8f6f4;color:#2a9d8f;">Due</span>
                  <span style="font-size:14px;color:var(--ink-ghost);">â€º</span>
                </div>
              </div>
            </div>

            <div class="section-head-label">Past Results</div>
            <div class="card">
              <div style="padding:14px 18px;border-bottom:1px solid var(--border);">
                <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:8px;">
                  <div style="font-size:13px;font-weight:700;color:var(--ink);">PHQ-9 Â· Feb 13</div>
                  <div style="font-size:13px;font-weight:700;color:#5a8a6a;">Score: 8</div>
                </div>
                <div style="height:6px;background:var(--border);border-radius:3px;overflow:hidden;">
                  <div style="height:100%;width:30%;background:linear-gradient(to right,#5a8a6a,#2a9d8f);border-radius:3px;"></div>
                </div>
                <div style="font-size:11px;color:var(--ink-soft);margin-top:4px;">Mild depression Â· Improved from 12</div>
              </div>
              <div style="padding:14px 18px;border-bottom:1px solid var(--border);">
                <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:8px;">
                  <div style="font-size:13px;font-weight:700;color:var(--ink);">GAD-7 Â· Feb 13</div>
                  <div style="font-size:13px;font-weight:700;color:#c9972a;">Score: 10</div>
                </div>
                <div style="height:6px;background:var(--border);border-radius:3px;overflow:hidden;">
                  <div style="height:100%;width:48%;background:linear-gradient(to right,#c9972a,#e07a1a);border-radius:3px;"></div>
                </div>
                <div style="font-size:11px;color:var(--ink-soft);margin-top:4px;">Moderate anxiety Â· Stable</div>
              </div>
              <div style="padding:14px 18px;">
                <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:8px;">
                  <div style="font-size:13px;font-weight:700;color:var(--ink);">ISI Â· Feb 10</div>
                  <div style="font-size:13px;font-weight:700;color:#5a8a6a;">Score: 7</div>
                </div>
                <div style="height:6px;background:var(--border);border-radius:3px;overflow:hidden;">
                  <div style="height:100%;width:25%;background:linear-gradient(to right,#5a8a6a,#2a9d8f);border-radius:3px;"></div>
                </div>
                <div style="font-size:11px;color:var(--ink-soft);margin-top:4px;">Sub-threshold insomnia</div>
              </div>
            </div>
          </div>
          <div class="tab-bar">
            <div class="tab-item" onclick="goScreen('today')"><div class="tab-icon">ğŸ“‹</div><span class="tab-label">Today</span></div>
            <div class="tab-item" onclick="goScreen('wellness')"><div class="tab-icon">ğŸ›¡ï¸</div><span class="tab-label">Wellness</span></div>
            <div class="tab-item" onclick="goScreen('triggers')"><div class="tab-icon">âš¡</div><span class="tab-label">Triggers</span></div>
            <div class="tab-item" onclick="goScreen('symptoms')"><div class="tab-icon">ğŸ’­</div><span class="tab-label">Symptoms</span></div>
            <div class="tab-item" onclick="goScreen('journal')"><div class="tab-icon">âœï¸</div><span class="tab-label">Journal</span></div>
            <div class="tab-item" onclick="goScreen('insights')"><div class="tab-icon">ğŸ“ˆ</div><span class="tab-label">Insights</span></div>
          </div>
        </div>

        <!-- â—†â—†â—† MEDICATIONS â—†â—†â—† -->
        <div class="screen" id="s-medications">
          <div style="padding:12px 24px 18px;background:linear-gradient(150deg,#2a1e3a 0%,#1a1224 100%);flex-shrink:0;position:relative;overflow:hidden;">
            <div class="screen-header-top"><div class="screen-header-back" onclick="goScreen('today')">â† Today</div></div>
            <div class="screen-header-title">Medications</div>
            <div class="screen-header-sub">Track adherence & manage your meds</div>
            <div class="header-stat-row">
              <div class="header-stat"><div class="header-stat-num" style="color:#7ec8a0;">87%</div><div class="header-stat-label">Adherence</div></div>
              <div class="header-stat"><div class="header-stat-num">2</div><div class="header-stat-label">Active Meds</div></div>
              <div class="header-stat"><div class="header-stat-num" style="color:#7ec8a0;">26</div><div class="header-stat-label">Day Streak</div></div>
            </div>
          </div>
          <div class="scroll-area">
            <div class="section-head-label">Today's Schedule</div>
            <div class="card" id="medSchedule">
              <div style="padding:14px 18px;border-bottom:1px solid var(--border);display:flex;align-items:center;justify-content:space-between;">
                <div style="display:flex;align-items:center;gap:12px;">
                  <div style="width:36px;height:36px;border-radius:10px;background:var(--teal-light);display:flex;align-items:center;justify-content:center;font-size:16px;">ğŸ’Š</div>
                  <div>
                    <div style="font-size:14px;font-weight:700;color:var(--ink);">Lamotrigine 100mg</div>
                    <div style="font-size:12px;color:var(--ink-soft);">Morning Â· 8:00 AM</div>
                  </div>
                </div>
                <div class="toggle-pill on" onclick="this.classList.toggle('on');this.classList.toggle('off');showToastInScreen(this.classList.contains('on')?'ğŸ’Š Taken':'Unmarked')"><div class="knob"></div></div>
              </div>
              <div style="padding:14px 18px;display:flex;align-items:center;justify-content:space-between;">
                <div style="display:flex;align-items:center;gap:12px;">
                  <div style="width:36px;height:36px;border-radius:10px;background:var(--lavender-light);display:flex;align-items:center;justify-content:center;font-size:16px;">ğŸ’Š</div>
                  <div>
                    <div style="font-size:14px;font-weight:700;color:var(--ink);">Sertraline 50mg</div>
                    <div style="font-size:12px;color:var(--ink-soft);">Evening Â· 8:00 PM</div>
                  </div>
                </div>
                <div class="toggle-pill off" onclick="this.classList.toggle('on');this.classList.toggle('off');showToastInScreen(this.classList.contains('on')?'ğŸ’Š Taken':'Unmarked')"><div class="knob"></div></div>
              </div>
            </div>

            <div class="section-head-label">Adherence This Week</div>
            <div class="card" style="padding:16px 18px;">
              <div style="display:flex;justify-content:space-between;align-items:flex-end;height:80px;gap:4px;margin-bottom:10px;">
                <div style="flex:1;display:flex;flex-direction:column;align-items:center;gap:4px;">
                  <div style="width:100%;height:60px;background:var(--teal);border-radius:4px 4px 0 0;"></div>
                  <div style="font-size:9px;color:var(--ink-soft);">M</div>
                </div>
                <div style="flex:1;display:flex;flex-direction:column;align-items:center;gap:4px;">
                  <div style="width:100%;height:60px;background:var(--teal);border-radius:4px 4px 0 0;"></div>
                  <div style="font-size:9px;color:var(--ink-soft);">T</div>
                </div>
                <div style="flex:1;display:flex;flex-direction:column;align-items:center;gap:4px;">
                  <div style="width:100%;height:30px;background:var(--rose);border-radius:4px 4px 0 0;"></div>
                  <div style="font-size:9px;color:var(--ink-soft);">W</div>
                </div>
                <div style="flex:1;display:flex;flex-direction:column;align-items:center;gap:4px;">
                  <div style="width:100%;height:60px;background:var(--teal);border-radius:4px 4px 0 0;"></div>
                  <div style="font-size:9px;color:var(--ink-soft);">T</div>
                </div>
                <div style="flex:1;display:flex;flex-direction:column;align-items:center;gap:4px;">
                  <div style="width:100%;height:60px;background:var(--teal);border-radius:4px 4px 0 0;"></div>
                  <div style="font-size:9px;color:var(--ink-soft);">F</div>
                </div>
                <div style="flex:1;display:flex;flex-direction:column;align-items:center;gap:4px;">
                  <div style="width:100%;height:60px;background:var(--teal);border-radius:4px 4px 0 0;"></div>
                  <div style="font-size:9px;color:var(--ink-soft);">S</div>
                </div>
                <div style="flex:1;display:flex;flex-direction:column;align-items:center;gap:4px;">
                  <div style="width:100%;height:30px;background:var(--gold);border-radius:4px 4px 0 0;"></div>
                  <div style="font-size:9px;color:var(--teal);font-weight:700;">S</div>
                </div>
              </div>
              <div style="display:flex;justify-content:space-between;font-size:11px;color:var(--ink-soft);">
                <span>ğŸŸ¢ All taken</span>
                <span>ğŸŸ¡ Partial</span>
                <span>ğŸ”´ Missed</span>
              </div>
            </div>

            <div class="section-head-label">Manage Medications</div>
            <div style="background:var(--card);border:1.5px dashed var(--border-dark);border-radius:var(--r-lg);padding:14px 18px;display:flex;align-items:center;gap:12px;cursor:pointer;" onclick="showToastInScreen('+ Add medication')">
              <div style="width:36px;height:36px;border-radius:10px;background:var(--teal-light);display:flex;align-items:center;justify-content:center;font-size:18px;color:var(--teal);">ï¼‹</div>
              <div style="font-size:14px;font-weight:600;color:var(--teal);">Add new medication</div>
            </div>
          </div>
          <div class="tab-bar">
            <div class="tab-item" onclick="goScreen('today')"><div class="tab-icon">ğŸ“‹</div><span class="tab-label">Today</span></div>
            <div class="tab-item" onclick="goScreen('wellness')"><div class="tab-icon">ğŸ›¡ï¸</div><span class="tab-label">Wellness</span></div>
            <div class="tab-item" onclick="goScreen('triggers')"><div class="tab-icon">âš¡</div><span class="tab-label">Triggers</span></div>
            <div class="tab-item" onclick="goScreen('symptoms')"><div class="tab-icon">ğŸ’­</div><span class="tab-label">Symptoms</span></div>
            <div class="tab-item" onclick="goScreen('journal')"><div class="tab-icon">âœï¸</div><span class="tab-label">Journal</span></div>
            <div class="tab-item" onclick="goScreen('insights')"><div class="tab-icon">ğŸ“ˆ</div><span class="tab-label">Insights</span></div>
          </div>
        </div>

      </div><!-- end phone-screen -->
    </div><!-- end phone-shell -->

    <!-- Toast container at phone level -->
    <div class="toast" id="globalToast"></div>
  </div><!-- end phone-wrapper -->

  <!-- ANNOTATION PANEL -->
  <div class="ann-panel">
    <div id="annTitle" class="ann-title">Onboarding</div>
    <div id="annSub" class="ann-sub">Welcome flow</div>
    <div id="annBody"></div>
    <div class="sdot-nav" id="sdotNav"></div>
  </div>
</div><!-- end phone-stage -->

<script>
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// DATA
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const MOOD_COLORS=['#d62c2c','#e05a2a','#e07a1a','#d09416','#c9972a','#8aaa30','#5a8a6a','#2a9d7e','#2a8ab5','#2a6db5'];
const MOOD_LABELS=['Very Low','Low','Below Avg','Fair','Moderate','OK','Good','Great','Very Good','Excellent'];
const MOOD_PIPS=['ğŸ˜£','ğŸ˜','ğŸ˜•','ğŸ˜','ğŸ™‚','ğŸ˜Š','ğŸ˜ƒ','ğŸ˜„','ğŸŒŸ','âœ¨'];

let state={
  mood:7, coping:6, sleepH:7, sleepM:30, exercise:30,
  meds:[{name:'Lamotrigine 100mg',dose:'Morning dose',taken:true},{name:'Sertraline 50mg',dose:'Evening dose',taken:false}],
  currentDate:new Date(2026,1,20),
  obSlide:0,
};

const WELLNESS_DATA=[
  {icon:'ğŸ˜´',name:'Adequate Sleep',state:'y',val:7,showSlider:true},
  {icon:'ğŸƒ',name:'Exercise',state:'y',val:8,showSlider:false},
  {icon:'ğŸ§˜',name:'Relaxation / Meditation',state:'n',val:0,showSlider:false},
  {icon:'ğŸ¥—',name:'Healthy Meals',state:'y',val:0,showSlider:false},
  {icon:'ğŸ’§',name:'Plenty of Water',state:'na',val:0,showSlider:false},
  {icon:'â˜•',name:'Minimal Caffeine',state:'n',val:0,showSlider:false},
  {icon:'ğŸ·',name:'Minimal Alcohol',state:'na',val:0,showSlider:false},
  {icon:'ğŸ‘¨â€âš•ï¸',name:'Professional Support',state:'na',val:0,showSlider:false},
  {icon:'ğŸ‘¥',name:'Social Support',state:'y',val:0,showSlider:false},
  {icon:'ğŸ’Š',name:'Alternative Therapies',state:'na',val:0,showSlider:false},
  {icon:'ğŸ“…',name:'Routine Day',state:'na',val:0,showSlider:false},
  {icon:'ğŸ¯',name:'Enjoyable Activities',state:'y',val:0,showSlider:false},
  {icon:'ğŸŒ³',name:'Time Outside',state:'n',val:0,showSlider:false},
];

const TRIGGER_DATA=[
  {cat:'Work & Home',items:[
    {icon:'ğŸ’¼',name:'Stress at Work',active:true,val:7},
    {icon:'ğŸ ',name:'Stress at Home',active:false,val:0},
    {icon:'ğŸ“‹',name:'Too Much To Do',active:true,val:5},
    {icon:'ğŸ’”',name:'Relationship Problem',active:false,val:0},
    {icon:'ğŸ—£ï¸',name:'Arguing',active:false,val:0},
  ]},
  {cat:'Behavioural',items:[
    {icon:'ğŸ˜´',name:'Lack of Sleep',active:false,val:0},
    {icon:'ğŸƒ',name:'Lack of Exercise',active:false,val:0},
    {icon:'ğŸ’¬',name:'Negative Self Talk',active:true,val:6},
    {icon:'ğŸ·',name:'Alcohol Consumption',active:false,val:0},
    {icon:'ğŸ”',name:'Poor Diet',active:false,val:0},
    {icon:'ğŸ’Š',name:'Medicine Not Taken',active:false,val:0},
  ]},
  {cat:'Life Events',items:[
    {icon:'ğŸ˜·',name:'Ill-health or Pain',active:false,val:0},
    {icon:'ğŸ”„',name:'Difficult Life Changes',active:false,val:0},
    {icon:'ğŸ¢',name:'Workplace Changes',active:false,val:0},
    {icon:'ğŸ’‰',name:'Change in Treatment',active:false,val:0},
  ]},
];

const SYMPTOM_DATA=[
  {cat:'Mood',items:[
    {icon:'ğŸ˜ ',name:'Irritability',active:true,val:4},
    {icon:'ğŸ˜¤',name:'Anger',active:false,val:0},
    {icon:'ğŸ˜¢',name:'Sadness',active:false,val:0},
    {icon:'ğŸ˜°',name:'Anxiety',active:true,val:5},
    {icon:'ğŸ˜”',name:'Feeling Guilty',active:false,val:0},
  ]},
  {cat:'Cognitive & Physical',items:[
    {icon:'ğŸŒ‘',name:'Feeling Hopeless',active:false,val:0},
    {icon:'ğŸ˜¶',name:'Feeling Worthless',active:false,val:0},
    {icon:'ğŸ’¬',name:'Negative Self Talk',active:false,val:0},
    {icon:'ğŸ˜´',name:'Insufficient Sleep',active:false,val:0},
    {icon:'ğŸ˜ª',name:'Excessive Sleep',active:false,val:0},
    {icon:'ğŸ”‹',name:'Loss of Energy',active:false,val:0},
    {icon:'ğŸ’”',name:'Loss of Interest',active:false,val:0},
  ]},
  {cat:'Safety Check',items:[
    {icon:'âš ï¸',name:'Suicidal Thoughts',active:false,val:0},
  ]},
];

const OB_SLIDES=[
  {icon:'ğŸ“‹',bg:'linear-gradient(135deg,#e8f6f4,#d0eeea)',title:'90 seconds a day',body:'A quick daily check-in on mood, sleep, and what\'s happening. The more you log, the clearer the patterns.'},
  {icon:'ğŸ›¡ï¸',bg:'linear-gradient(135deg,#eef5f0,#d8edde)',title:'Track what keeps you well',body:'Log your protective strategies â€” exercise, sleep quality, social time â€” and see what actually makes a difference.'},
  {icon:'ğŸ“ˆ',bg:'linear-gradient(135deg,#e8eaf6,#d8daf0)',title:'Discover your patterns',body:'AI-powered correlation charts show what\'s linked to better days. Share reports directly with your clinician.'},
  {icon:'ğŸ”’',bg:'linear-gradient(135deg,#f0ede8,#e4dfd8)',title:'Private by design',body:'All data lives on your device. Cloud sync is optional. Nothing leaves your phone without your explicit approval.'},
];

const JOURNAL_PROMPTS=[
  '"What\'s one small thing that went well today, even if today was hard?"',
  '"Describe how your body feels right now. What does that tell you?"',
  '"What\'s been weighing on your mind this week?"',
  '"What are you grateful for today, no matter how small?"',
  '"What would you tell a friend who was feeling exactly as you are right now?"',
];

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// ONBOARDING SLIDES
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function renderObSlides(){
  const s=state.obSlide;
  const d=OB_SLIDES[s];
  document.getElementById('obSlideContent').innerHTML=`
    <div class="ob-slide-visual" style="background:${d.bg};">${d.icon}</div>
    <div class="ob-slide-title">${d.title}</div>
    <div class="ob-slide-body">${d.body}</div>`;
  const dots=document.getElementById('obSlideDots');
  dots.innerHTML=OB_SLIDES.map((_,i)=>`<div class="ob-dot${i===s?' active':''}" onclick="setObSlide(${i})"></div>`).join('');
  document.getElementById('obNextBtn').textContent=s===OB_SLIDES.length-1?'Get Started â†’':'Next â†’';
}
function setObSlide(i){state.obSlide=i;renderObSlides();}
function obNextSlide(){
  if(state.obSlide<OB_SLIDES.length-1){state.obSlide++;renderObSlides();}
  else goScreen('onboard3');
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// MEDICATIONS (onboarding)
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
let obMeds=[{name:'Lamotrigine 100mg',dose:''},{name:'Sertraline 50mg',dose:''}];
function renderObMeds(){
  const el=document.getElementById('medList');
  el.innerHTML=obMeds.map((m,i)=>`
    <div class="med-chip">
      <div class="med-chip-icon">ğŸ’Š</div>
      <div class="med-chip-info"><div class="med-chip-name">${m.name}</div></div>
      <div class="med-chip-remove" onclick="removeObMed(${i})">âœ•</div>
    </div>`).join('')+`<div style="height:4px;"></div>`;
}
function removeObMed(i){obMeds.splice(i,1);renderObMeds();}
function showMedInput(){document.getElementById('medInputRow').style.display='flex';document.getElementById('medNameInput').focus();}
function addMed(){
  const v=document.getElementById('medNameInput').value.trim();
  if(v){obMeds.push({name:v,dose:''});renderObMeds();document.getElementById('medNameInput').value='';document.getElementById('medInputRow').style.display='none';}
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// MOOD RINGS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function buildMoodRing(containerId, valKey, badgeId, labels){
  const c=document.getElementById(containerId);
  if(!c)return;
  c.innerHTML=MOOD_COLORS.map((col,i)=>{
    const v=i+1;
    const sel=state[valKey]===v;
    return `<div class="mood-pip${sel?' selected':''}" style="background:${col};"
      onclick="selectMood('${valKey}','${badgeId}',${v},'${containerId}')">${v}</div>`;
  }).join('');
}
function selectMood(key,badgeId,val,ringId){
  state[key]=val;
  buildMoodRing(ringId,key,badgeId);
  const badge=document.getElementById(badgeId);
  if(badge){
    badge.textContent=val+' Â· '+MOOD_LABELS[val-1];
    badge.style.background=MOOD_COLORS[val-1]+'22';
    badge.style.color=MOOD_COLORS[val-1];
  }
  showToastInScreen('âœ“ Saved');
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// SLEEP STEPPER
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function adjustSleep(type,delta){
  if(type==='h'){state.sleepH=Math.max(0,Math.min(12,state.sleepH+delta));}
  else{
    state.sleepM+=delta;
    if(state.sleepM>=60){state.sleepM-=60;state.sleepH=Math.min(12,state.sleepH+1);}
    if(state.sleepM<0){state.sleepM+=60;state.sleepH=Math.max(0,state.sleepH-1);}
  }
  document.getElementById('sleepHrs').textContent=state.sleepH;
  document.getElementById('sleepMins').textContent=state.sleepM.toString().padStart(2,'0');
  document.getElementById('sleepHourDisplay').innerHTML=state.sleepH+'<span style="font-size:16px;color:var(--ink-soft);">h</span>';
  document.getElementById('sleepBadge').textContent=state.sleepH+'h '+state.sleepM+'m';
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// EXERCISE PRESETS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function setExercise(el,mins){
  document.querySelectorAll('.preset-btn').forEach(b=>b.classList.remove('active'));
  el.classList.add('active');
  state.exercise=mins;
  document.getElementById('exerciseBadge').textContent=mins>0?mins+' min':'None';
  showToastInScreen('âœ“ Saved');
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// MEDICINE CARDS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function renderMedCards(){
  const el=document.getElementById('medCards');
  if(!el)return;
  el.innerHTML=state.meds.map((m,i)=>`
    <div style="display:flex;align-items:center;justify-content:space-between;padding:14px 18px;${i<state.meds.length-1?'border-bottom:1px solid var(--border);':''}">
      <div><div class="med-name">${m.name}</div><div class="med-sub">${m.dose}</div></div>
      <div class="toggle-pill ${m.taken?'on':'off'}" onclick="toggleMed(${i})"><div class="knob"></div></div>
    </div>`).join('');
}
function toggleMed(i){
  state.meds[i].taken=!state.meds[i].taken;
  renderMedCards();
  showToastInScreen(state.meds[i].taken?'ğŸ’Š Medicine logged':'Medicine unmarked');
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// WELLNESS SCREEN
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function renderWellness(){
  const el=document.getElementById('wellnessScrollArea');
  if(!el)return;
  const physical=WELLNESS_DATA.slice(0,7);
  const social=WELLNESS_DATA.slice(7);
  el.innerHTML=renderWellnessSection('Physical',physical,0)+renderWellnessSection('Social & Mental',social,7);
  updateWellnessStats();
}
function renderWellnessSection(label,items,offset){
  return `<div class="section-head-label">${label}</div>
  <div class="card">${items.map((item,i)=>renderWellnessItem(item,offset+i)).join('')}
    ${offset===0?'':''}
  </div>`;
}
function renderWellnessItem(item,idx){
  const dimmed=item.state==='na'||item.state==='n'?'dimmed':'';
  const slider=item.state==='y'&&item.showSlider?`
    <div class="inline-slider visible">
      <div class="slider-wrap sage-wrap">
        <div class="slider-label"><span>Quality</span><span class="slider-val sage" id="wv${idx}">${item.val}/10</span></div>
        <div class="gradient-track-wrap">
          <input type="range" class="sage-range" min="1" max="10" value="${item.val}" 
            oninput="updateSliderVal('wv${idx}',this.value,'sage');WELLNESS_DATA[${idx}].val=parseInt(this.value);">
        </div>
      </div>
    </div>`:`<div class="inline-slider${item.state==='y'?' visible':' hidden'}" id="ws${idx}">
      <div class="slider-wrap sage-wrap">
        <div class="slider-label"><span>Quality</span><span class="slider-val sage" id="wv${idx}">${item.val||5}/10</span></div>
        <div class="gradient-track-wrap">
          <input type="range" class="sage-range" min="1" max="10" value="${item.val||5}"
            oninput="updateSliderVal('wv${idx}',this.value,'sage');WELLNESS_DATA[${idx}].val=parseInt(this.value);">
        </div>
      </div>
    </div>`;
  return `<div class="strategy-item">
    <div class="item-top">
      <div class="item-left">
        <div class="item-icon">${item.icon}</div>
        <div class="item-name ${dimmed}">${item.name}</div>
      </div>
      <div class="tristate">
        <div class="ts-btn${item.state==='y'?' y':''}" onclick="setW(${idx},'y')">Yes</div>
        <div class="ts-btn${item.state==='n'?' n':''}" onclick="setW(${idx},'n')">No</div>
        <div class="ts-btn${item.state==='na'?' na':''}" onclick="setW(${idx},'na')">N/A</div>
      </div>
    </div>
    ${slider}
  </div>`;
}
function setW(idx,val){
  WELLNESS_DATA[idx].state=val;
  if(val==='y')WELLNESS_DATA[idx].showSlider=true;
  renderWellness();
}
function updateWellnessStats(){
  const y=WELLNESS_DATA.filter(d=>d.state==='y').length;
  const n=WELLNESS_DATA.filter(d=>d.state==='n').length;
  const na=WELLNESS_DATA.filter(d=>d.state==='na').length;
  const el=d=>document.getElementById(d);
  if(el('wDone'))el('wDone').textContent=y;
  if(el('wNo'))el('wNo').textContent=n;
  if(el('wNA'))el('wNA').textContent=na;
  if(el('wellnessDoneCount'))el('wellnessDoneCount').textContent=y;
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// TRIGGERS SCREEN
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function renderTriggers(){
  const el=document.getElementById('triggersScrollArea');
  if(!el)return;
  let html='';
  TRIGGER_DATA.forEach(cat=>{
    html+=`<div class="section-head-label">${cat.cat}</div><div class="card">`;
    cat.items.forEach((item,i)=>{
      const allIdx=TRIGGER_DATA.flatMap(c=>c.items).indexOf(item);
      html+=`<div class="trigger-item">
        <div class="item-top">
          <div class="item-left">
            <div class="item-icon">${item.icon}</div>
            <div class="item-name${item.active?'':' dimmed'}">${item.name}</div>
          </div>
          <div class="tristate">
            <div class="ts-btn${item.active?' on':''}" onclick="setTrigger(this,'${cat.cat}',${i},true)">On</div>
            <div class="ts-btn${!item.active?' na':''}" onclick="setTrigger(this,'${cat.cat}',${i},false)">N/A</div>
          </div>
        </div>
        <div class="inline-slider${item.active?' visible':' hidden'}" id="tsw_${cat.cat}_${i}">
          <div class="slider-wrap rose-wrap">
            <div class="slider-label"><span>Severity</span><span class="slider-val rose" id="tsv_${cat.cat}_${i}">${item.val||5}/10</span></div>
            <div class="gradient-track-wrap">
              <input type="range" class="rose-range" min="1" max="10" value="${item.val||5}"
                oninput="updateTriggerVal('${cat.cat}',${i},this.value)">
            </div>
          </div>
        </div>
      </div>`;
    });
    html+=`</div>`;
  });
  html+=`<div style="margin-top:10px;padding:14px 18px;background:var(--card);border:1.5px dashed var(--border-dark);border-radius:var(--r-lg);display:flex;align-items:center;gap:10px;cursor:pointer;" onclick="showToastInScreen('+ Custom trigger')">
    <div style="width:28px;height:28px;border-radius:8px;background:var(--rose-light);display:flex;align-items:center;justify-content:center;font-size:16px;">ï¼‹</div>
    <div style="font-size:14px;font-weight:600;color:var(--rose);">Add custom trigger</div>
  </div>`;
  el.innerHTML=html;
  updateTriggerStats();
}
function setTrigger(el,cat,idx,active){
  const catData=TRIGGER_DATA.find(c=>c.cat===cat);
  catData.items[idx].active=active;
  renderTriggers();
}
function updateTriggerVal(cat,idx,val){
  const catData=TRIGGER_DATA.find(c=>c.cat===cat);
  catData.items[idx].val=parseInt(val);
  const el=document.getElementById(`tsv_${cat}_${idx}`);
  if(el)el.textContent=val+'/10';
  updateTriggerStats();
}
function updateTriggerStats(){
  const allItems=TRIGGER_DATA.flatMap(c=>c.items);
  const active=allItems.filter(i=>i.active);
  const avg=active.length?( active.reduce((s,i)=>s+(i.val||5),0)/active.length).toFixed(1):'â€”';
  const el=d=>document.getElementById(d);
  if(el('tActive'))el('tActive').textContent=active.length;
  if(el('tNA'))el('tNA').textContent=allItems.length-active.length;
  if(el('tAvg'))el('tAvg').textContent=avg;
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// SYMPTOMS SCREEN
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function renderSymptoms(){
  const el=document.getElementById('symptomsScrollArea');
  if(!el)return;
  let html='';
  SYMPTOM_DATA.forEach(cat=>{
    html+=`<div class="section-head-label">${cat.cat}</div><div class="card">`;
    cat.items.forEach((item,i)=>{
      const isSafety=cat.cat==='Safety Check';
      html+=`<div class="symptom-item">
        <div class="item-top">
          <div class="item-left">
            <div class="item-icon">${item.icon}</div>
            <div class="item-name${item.active?'':' dimmed'}">${item.name}</div>
          </div>
          <div class="tristate">
            <div class="ts-btn${item.active?' active-lav':''}" onclick="setSymptom('${cat.cat}',${i},true)">On</div>
            <div class="ts-btn${!item.active?' na':''}" onclick="setSymptom('${cat.cat}',${i},false)">N/A</div>
          </div>
        </div>
        <div class="inline-slider${item.active?' visible':' hidden'}">
          <div class="slider-wrap lav-wrap">
            <div class="slider-label"><span>Intensity</span><span class="slider-val lav" id="syv_${cat.cat}_${i}">${item.val||5}/10</span></div>
            <div class="gradient-track-wrap">
              <input type="range" class="lav-range" min="1" max="10" value="${item.val||5}"
                oninput="updateSymptomVal('${cat.cat}',${i},this.value)">
            </div>
          </div>
        </div>
        ${isSafety&&item.active?`<div style="background:#fff8e1;border:1px solid #f5d76e;border-radius:var(--r-sm);padding:10px 12px;margin-top:8px;font-size:12px;color:#6b5400;line-height:1.4;">If you're having thoughts of suicide, please reach out. <span style="color:#c9972a;font-weight:700;text-decoration:underline;cursor:pointer;" onclick="showToastInScreen('ğŸ“ Resources: 988 Suicide & Crisis Lifeline')">Tap here for resources â†’</span></div>`:''}
      </div>`;
    });
    html+=`</div>`;
  });
  el.innerHTML=html;
  updateSymptomStats();
}
function setSymptom(cat,idx,active){
  const catData=SYMPTOM_DATA.find(c=>c.cat===cat);
  catData.items[idx].active=active;
  renderSymptoms();
}
function updateSymptomVal(cat,idx,val){
  const catData=SYMPTOM_DATA.find(c=>c.cat===cat);
  catData.items[idx].val=parseInt(val);
  const el=document.getElementById(`syv_${cat}_${idx}`);
  if(el)el.textContent=val+'/10';
  updateSymptomStats();
}
function updateSymptomStats(){
  const allItems=SYMPTOM_DATA.flatMap(c=>c.items);
  const active=allItems.filter(i=>i.active);
  const avg=active.length?(active.reduce((s,i)=>s+(i.val||5),0)/active.length).toFixed(1):'â€”';
  const el=d=>document.getElementById(d);
  if(el('sActive'))el('sActive').textContent=active.length;
  if(el('sNA'))el('sNA').textContent=allItems.length-active.length;
  if(el('sAvg'))el('sAvg').textContent=avg;
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// JOURNAL
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function updateWordCount(){
  const text=document.getElementById('journalText');
  if(!text)return;
  const words=text.value.trim().split(/\s+/).filter(w=>w).length;
  const el=document.getElementById('wordCount');
  if(el)el.textContent=words+' word'+(words!==1?'s':'');
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// INSIGHTS CHARTS (Canvas)
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const MOOD_CHART_DATA=[4,3,6,8,7,6,5,5,5,4,6,6,5,4,5,6,7,7,6,7,7,5,6,8,9,9,8,7];
const COPED_CHART_DATA=[8,8,6,8,8,7,7,5,5,5,6,6,5,5,5,6,7,7,6,7,7,5,6,7,8,8,7,7];
const SLEEP_CHART_DATA=[6,7,6.5,8,7,7,7,6,7,6.5,8,5.5,7,7,7.5,7,8,7,6.5,7,7.5,7,6,7,7.5,7,8,7.5];

function drawMoodChart(){
  const canvas=document.getElementById('moodChart');
  if(!canvas)return;
  const ctx=canvas.getContext('2d');
  const W=canvas.width,H=canvas.height;
  const pad={l:24,r:12,t:12,b:20};
  const iW=W-pad.l-pad.r,iH=H-pad.t-pad.b;
  ctx.clearRect(0,0,W,H);
  const n=MOOD_CHART_DATA.length;
  const x=i=>pad.l+i/(n-1)*iW;
  const y=v=>pad.t+iH-(v-1)/9*iH;
  // Grid
  ctx.strokeStyle='#e2ddd6';ctx.lineWidth=0.5;
  [2,4,6,8,10].forEach(v=>{ctx.beginPath();ctx.moveTo(pad.l,y(v));ctx.lineTo(W-pad.r,y(v));ctx.stroke();});
  // Y labels
  ctx.fillStyle='#9b958e';ctx.font='9px Figtree,sans-serif';ctx.textAlign='right';
  [2,5,8,10].forEach(v=>ctx.fillText(v,pad.l-2,y(v)+3));
  // X labels
  ctx.textAlign='center';
  [1,7,14,21,28].forEach(d=>ctx.fillText(d,x(d-1),H-4));
  // Coping line
  ctx.beginPath();ctx.strokeStyle='#b8b0a8';ctx.lineWidth=1.5;ctx.lineJoin='round';
  COPED_CHART_DATA.forEach((v,i)=>{i===0?ctx.moveTo(x(i),y(v)):ctx.lineTo(x(i),y(v));});
  ctx.stroke();
  // Mood fill
  const grad=ctx.createLinearGradient(0,pad.t,0,H-pad.b);
  grad.addColorStop(0,'rgba(90,138,106,0.18)');grad.addColorStop(1,'rgba(90,138,106,0)');
  ctx.beginPath();ctx.moveTo(x(0),y(MOOD_CHART_DATA[0]));
  MOOD_CHART_DATA.forEach((v,i)=>{if(i>0)ctx.lineTo(x(i),y(v));});
  ctx.lineTo(x(n-1),H-pad.b);ctx.lineTo(x(0),H-pad.b);ctx.closePath();
  ctx.fillStyle=grad;ctx.fill();
  // Mood line
  ctx.beginPath();ctx.strokeStyle='#5a8a6a';ctx.lineWidth=2;ctx.lineJoin='round';
  MOOD_CHART_DATA.forEach((v,i)=>{i===0?ctx.moveTo(x(i),y(v)):ctx.lineTo(x(i),y(v));});
  ctx.stroke();
  // Last point
  const lx=x(n-1),ly=y(MOOD_CHART_DATA[n-1]);
  ctx.beginPath();ctx.arc(lx,ly,4,0,Math.PI*2);ctx.fillStyle='white';ctx.strokeStyle='#5a8a6a';ctx.lineWidth=2;ctx.fill();ctx.stroke();
  // Touch interaction
  canvas._chartData={x,y,n,pad,iW,iH,W,H};
}

function drawSleepChart(){
  const canvas=document.getElementById('sleepChart');
  if(!canvas)return;
  const ctx=canvas.getContext('2d');
  const W=canvas.width,H=canvas.height;
  const pad={l:28,r:8,t:8,b:16};
  const iW=W-pad.l-pad.r,iH=H-pad.t-pad.b;
  ctx.clearRect(0,0,W,H);
  const n=SLEEP_CHART_DATA.length;
  const bw=(iW/n)*0.6;
  // Grid
  ctx.strokeStyle='#e2ddd6';ctx.lineWidth=0.5;
  [4,6,8,10].forEach(v=>{
    const yp=pad.t+iH-(v-2)/8*iH;
    ctx.beginPath();ctx.moveTo(pad.l,yp);ctx.lineTo(W-pad.r,yp);ctx.stroke();
  });
  ctx.fillStyle='#9b958e';ctx.font='9px Figtree,sans-serif';ctx.textAlign='right';
  [4,6,8,10].forEach(v=>{ctx.fillText(v+'h',pad.l-2,pad.t+iH-(v-2)/8*iH+3);});
  // Target line (7h)
  const targetY=pad.t+iH-(7-2)/8*iH;
  ctx.setLineDash([4,3]);ctx.strokeStyle='#5a8a6a';ctx.lineWidth=0.8;
  ctx.beginPath();ctx.moveTo(pad.l,targetY);ctx.lineTo(W-pad.r,targetY);ctx.stroke();
  ctx.setLineDash([]);
  ctx.fillStyle='#5a8a6a';ctx.font='8px Figtree,sans-serif';ctx.textAlign='left';ctx.fillText('7h',W-pad.r-16,targetY-2);
  // Bars
  SLEEP_CHART_DATA.forEach((v,i)=>{
    const bx=pad.l+i*(iW/n)+((iW/n)-bw)/2;
    const bh=(v-2)/8*iH;
    const by=pad.t+iH-bh;
    const belowTarget=v<7;
    ctx.beginPath();
    ctx.roundRect?ctx.roundRect(bx,by,bw,bh,2):ctx.rect(bx,by,bw,bh);
    ctx.fillStyle=belowTarget?'rgba(224,92,110,0.65)':'rgba(124,111,160,0.65)';
    ctx.fill();
  });
  // X labels
  ctx.fillStyle='#9b958e';ctx.textAlign='center';ctx.font='8px Figtree,sans-serif';
  [1,7,14,21,28].forEach(d=>{
    ctx.fillStyle=d===28?'#5a8a6a':'#9b958e';
    ctx.fillText(d,pad.l+(d-1)*(iW/n)+bw/2,H-2);
  });
}

// Chart tooltip
function setupChartTooltip(){
  const canvas=document.getElementById('moodChart');
  if(!canvas)return;
  canvas.addEventListener('mousemove',e=>{
    const rect=canvas.getBoundingClientRect();
    const scaleX=canvas.width/rect.width;
    const mx=(e.clientX-rect.left)*scaleX;
    const d=canvas._chartData;
    if(!d)return;
    const step=d.iW/(d.n-1);
    const i=Math.round((mx-d.pad.l)/step);
    if(i<0||i>=d.n)return;
    const tooltip=document.getElementById('chartTooltip');
    if(!tooltip)return;
    tooltip.textContent=`Day ${i+1}: Mood ${MOOD_CHART_DATA[i]} Â· Coped ${COPED_CHART_DATA[i]}`;
    const px=d.x(i)/canvas.width*rect.width;
    const py=d.y(MOOD_CHART_DATA[i])/canvas.height*rect.height;
    tooltip.style.left=px+'px';
    tooltip.style.top=(py-8)+'px';
    tooltip.classList.remove('hidden');
  });
  canvas.addEventListener('mouseleave',()=>{
    const t=document.getElementById('chartTooltip');
    if(t)t.classList.add('hidden');
  });
}

// Correlations
function renderCorrelations(){
  const el=document.getElementById('corrRows');
  if(!el)return;
  const corrs=[
    {label:'Exercise',val:1.8,pos:true},
    {label:'7h+ Sleep',val:1.4,pos:true},
    {label:'Social time',val:1.1,pos:true},
    {label:'Work stress',val:-1.3,pos:false},
    {label:'Neg. self talk',val:-0.9,pos:false},
  ];
  el.innerHTML=corrs.map(c=>`
    <div class="corr-row" onclick="showToastInScreen('${c.label}: ${c.val>0?'+':''}${c.val} mood points')">
      <div class="corr-label">${c.label}</div>
      <div class="corr-bar-track">
        <div class="corr-bar-fill" style="width:${Math.abs(c.val)/2*100}%;background:${c.pos?'linear-gradient(to right,var(--teal-mid),var(--teal))':'linear-gradient(to right,#fde8eb,#e05c6e)'};"></div>
      </div>
      <div class="corr-val" style="color:${c.pos?'var(--teal)':'var(--rose)'}">${c.val>0?'+':''}${c.val}</div>
    </div>`).join('');
}

function setPeriod(el,period){
  document.querySelectorAll('.period-btn').forEach(b=>b.classList.remove('active'));
  el.classList.add('active');
  const insights={
    '2W':'Your mood has been <strong>trending upward</strong> over the past two weeks. Sleep averaging 7.1h.',
    '1M':'Your mood averages <strong>1.8 points higher</strong> on days with 30+ min exercise. You\'ve exercised 18 of 28 days this month.',
    '3M':'Consistent improvement since December. <strong>Average mood: 6.8</strong>, up from 5.2 in November.',
    'Custom':'Select start and end dates for a custom range.'
  };
  const el2=document.getElementById('insightText');
  if(el2)el2.innerHTML=insights[period];
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// DATE NAVIGATION
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const DAYS=['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'];
const MONTHS=['January','February','March','April','May','June','July','August','September','October','November','December'];
function formatDate(d){return `${DAYS[d.getDay()]}, ${d.getDate()} ${MONTHS[d.getMonth()]}`;}
function shiftDate(delta){
  state.currentDate=new Date(state.currentDate.getTime()+delta*86400000);
  const fmt=formatDate(state.currentDate);
  ['wDateLabel','tDateLabel','symDateLabel','jDateLabel'].forEach(id=>{
    const el=document.getElementById(id);
    if(el)el.textContent=fmt;
  });
  showToastInScreen(fmt);
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// TOAST
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
let toastTimer;
function showToastInScreen(msg){
  const t=document.getElementById('globalToast');
  if(!t)return;
  t.textContent=msg;
  t.classList.add('show');
  clearTimeout(toastTimer);
  toastTimer=setTimeout(()=>t.classList.remove('show'),1800);
}
function showToast(msg){showToastInScreen(msg);}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// SLIDER HELPER
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function updateSliderVal(id,val,theme){
  const el=document.getElementById(id);
  if(el)el.textContent=val+'/10';
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// SCREEN SWITCHING
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const SCREEN_IDS=['onboard1','onboard2','onboard3','onboard4','onboard5','today','wellness','triggers','symptoms','journal','insights','settings','assessments','medications'];
const SCREEN_TITLES={onboard1:'Welcome',onboard2:'How it works',onboard3:'Setup',onboard4:'Notifications',onboard5:'Ready!',today:'Today Â· Core Entry',wellness:'Stay Well Strategies',triggers:'Triggers',symptoms:'Symptoms',journal:'Journal',insights:'Insights',settings:'Settings',assessments:'Assessments',medications:'Medications'};
const SCREEN_SUBS={onboard1:'Onboarding Â· 1/5',onboard2:'Onboarding Â· 2/5',onboard3:'Onboarding Â· 3/5',onboard4:'Onboarding Â· 4/5',onboard5:'Onboarding Â· 5/5',today:'Screen 1 Â· Daily hub',wellness:'Screen 2 Â· Protective factors',triggers:'Screen 3 Â· Stress factors',symptoms:'Screen 4 Â· Mental state',journal:'Screen 5 Â· Free reflection',insights:'Screen 6 Â· Analytics',settings:'Settings Â· Extra screen',assessments:'Screen 7 Â· Validated scales',medications:'Screen 8 Â· Med tracking'};

const ANN={
  onboard1:`<div class="ann-card"><span class="ann-tag new">New</span><div class="ann-text"><strong>Welcome screen</strong> â€” Dark gradient creates a calming, considered first impression. Floating app icon animation is subtle but alive. "I already have an account" secondary path is prominent but doesn't compete.</div></div>
  <div class="ann-card"><span class="ann-tag live">Live</span><div class="ann-text">The icon <strong>floats continuously</strong> via CSS keyframe â€” no JS required. The gradient uses layered radial glows for depth, not a single linear gradient.</div></div>`,
  onboard2:`<div class="ann-card"><span class="ann-tag new">New</span><div class="ann-text"><strong>Feature slides</strong> â€” 4 slides covering the core value props: speed (90s), tracking wellness, insights, and privacy. Dot navigation below with animated pill indicator. Skip available throughout.</div></div>
  <div class="ann-card"><span class="ann-tag live">Live</span><div class="ann-text">Tap <strong>Next â†’</strong> to advance slides, tap any dot to jump. On the last slide the button changes to "Get Started â†’". All fully interactive.</div></div>`,
  onboard3:`<div class="ann-card"><span class="ann-tag new">New</span><div class="ann-text"><strong>Medication setup</strong> â€” Users add medications once during onboarding. These names populate the daily medicine toggles forever after. No re-typing each day.</div></div>
  <div class="ann-card"><span class="ann-tag live">Live</span><div class="ann-text">Tap <strong>Add medication</strong>, type a name, press Enter or Add. Chips animate in. Each chip has a live remove button. Progress bar fills across the 3 setup steps.</div></div>`,
  onboard4:`<div class="ann-card"><span class="ann-tag new">New</span><div class="ann-text"><strong>Notification permission</strong> â€” Shows a realistic preview of what the notification will look like before asking for permission. Much higher opt-in rate than a cold system prompt.</div></div>`,
  onboard5:`<div class="ann-card"><span class="ann-tag new">New</span><div class="ann-text"><strong>Completion state</strong> â€” Confirmation with checkmark, clear summary of what's set up, and a single action to begin. No confusion about what to do next.</div></div>`,
  today:`<div class="ann-card"><span class="ann-tag live">Live</span><div class="ann-text"><strong>Mood ring:</strong> tap any pip to select it. Color changes and badge updates instantly. The selected pip lifts with a shadow. The ring goes 1â€“10 with semantic color from redâ†’indigo.</div></div>
  <div class="ann-card"><span class="ann-tag live">Live</span><div class="ann-text"><strong>Sleep stepper:</strong> + / âˆ’ buttons on hours and minutes. Minutes wrap at 60 into hours. The large display updates instantly.</div></div>
  <div class="ann-card"><span class="ann-tag live">Live</span><div class="ann-text"><strong>Exercise presets:</strong> tap any duration to select it. Active state with teal fill. Badge in the card header updates.</div></div>
  <div class="ann-card"><span class="ann-tag live">Live</span><div class="ann-text"><strong>Medicine toggles:</strong> tap to toggle on/off with smooth animation. Names come from onboarding setup.</div></div>`,
  wellness:`<div class="ann-card"><span class="ann-tag live">Live</span><div class="ann-text"><strong>3-state tristate:</strong> tap Yes / No / N/A on any strategy. Yes â†’ slider expands inline with animation. N/A/No â†’ name dims and slider collapses.</div></div>
  <div class="ann-card"><span class="ann-tag live">Live</span><div class="ann-text"><strong>Stats header</strong> (Done / Didn't / N/A) updates in real time as you toggle items. The completion count on the Today screen also updates.</div></div>`,
  triggers:`<div class="ann-card"><span class="ann-tag live">Live</span><div class="ann-text"><strong>Active triggers:</strong> tap On to activate. Severity slider appears inline. Drag the slider to set severity â€” value label updates live. Tap N/A to deactivate and collapse.</div></div>
  <div class="ann-card"><span class="ann-tag live">Live</span><div class="ann-text"><strong>Stats header</strong> (Active / N/A / Avg Severity) recalculates on every change.</div></div>`,
  symptoms:`<div class="ann-card"><span class="ann-tag live">Live</span><div class="ann-text"><strong>Symptom sliders</strong> use a lavender gradient, distinct from rose (triggers) and sage (wellness). Each section has its own color language throughout the app.</div></div>
  <div class="ann-card"><span class="ann-tag new">New</span><div class="ann-text"><strong>Safety check:</strong> if Suicidal Thoughts is toggled On, a crisis resource card expands immediately with a direct tap-to-call link.</div></div>`,
  journal:`<div class="ann-card"><span class="ann-tag live">Live</span><div class="ann-text"><strong>Live textarea:</strong> type anything â€” word count updates in real time. The daily prompt is randomly selected from a curated library each day.</div></div>
  <div class="ann-card"><span class="ann-tag live">Live</span><div class="ann-text"><strong>Date nav arrows</strong> shift the current date on all screens simultaneously â€” Wellness, Triggers, Symptoms, and Journal all share the same date context.</div></div>`,
  insights:`<div class="ann-card"><span class="ann-tag live">Live</span><div class="ann-text"><strong>Mood chart:</strong> hover over the chart to see a tooltip with exact values for that day. Canvas-rendered with smooth curves.</div></div>
  <div class="ann-card"><span class="ann-tag live">Live</span><div class="ann-text"><strong>Period selector:</strong> tap 2W / 1M / 3M / Custom â€” the insight alert text updates to match the period. Correlation bars animate in on load.</div></div>
  <div class="ann-card"><span class="ann-tag live">Live</span><div class="ann-text"><strong>Sleep chart:</strong> bars below the 7h target line render in rose red â€” immediately visible at a glance.</div></div>`,
  settings:`<div class="ann-card"><span class="ann-tag new">New</span><div class="ann-text"><strong>Clinician connection</strong> â€” Shows connected clinician with name, role, and hospital. Share report and manage access actions are one tap away.</div></div>
  <div class="ann-card"><span class="ann-tag live">Live</span><div class="ann-text"><strong>All toggles are interactive</strong> â€” biometric lock, cloud sync, reminders. Tap any toggle to flip it live.</div></div>`,
  assessments:`<div class="ann-card"><span class="ann-tag new">New</span><div class="ann-text"><strong>Validated scales</strong> â€” Weekly PHQ-9, GAD-7, ISI, C-SSRS, and ASRM assessments. Shows due status and past scores with trend indicators.</div></div>
  <div class="ann-card"><span class="ann-tag new">New</span><div class="ann-text"><strong>Progress bars</strong> â€” Visual severity indicators with color-coded ranges (green for mild, yellow for moderate, red for severe).</div></div>
  <div class="ann-card"><span class="ann-tag live">Live</span><div class="ann-text"><strong>Tap any assessment</strong> to start it. Shows a toast with the assessment name. Full questionnaire flow coming in next iteration.</div></div>`,
  medications:`<div class="ann-card"><span class="ann-tag new">New</span><div class="ann-text"><strong>Medication tracking</strong> â€” View all medications with scheduled times. Toggle to mark as taken. Adherence stats at the top.</div></div>
  <div class="ann-card"><span class="ann-tag new">New</span><div class="ann-text"><strong>Weekly adherence chart</strong> â€” Visual bar chart showing daily adherence. Green = all taken, yellow = partial, red = missed.</div></div>
  <div class="ann-card"><span class="ann-tag live">Live</span><div class="ann-text"><strong>All toggles are interactive</strong> â€” tap to mark medications as taken. Stats update in real-time.</div></div>`,
};

// Assessment starter
function startAssessment(type){
  const names={phq9:'PHQ-9 Depression',gad7:'GAD-7 Anxiety',isi:'ISI Insomnia',asrm:'ASRM Mania',cssrs:'C-SSRS Safety'};
  showToastInScreen('ğŸ“‹ Starting '+names[type]+' assessment...');
}

const MAIN_SCREENS=['today','wellness','triggers','symptoms','journal','insights'];

function goScreen(id){
  SCREEN_IDS.forEach(s=>{
    const el=document.getElementById('s-'+s);
    if(el){el.classList.remove('active');el.style.display='';}
  });
  const target=document.getElementById('s-'+id);
  if(target)target.classList.add('active');
  // Update nav btns
  document.querySelectorAll('.screen-nav .nav-btn').forEach(b=>b.classList.remove('active'));
  const navMap={'onboard1':0,'onboard2':0,'onboard3':0,'onboard4':0,'onboard5':0,'today':1,'wellness':2,'triggers':3,'symptoms':4,'journal':5,'insights':6,'assessments':7,'medications':8,'settings':9};
  const nb=document.querySelectorAll('.screen-nav .nav-btn')[navMap[id]];
  if(nb)nb.classList.add('active');
  // Annotation
  document.getElementById('annTitle').textContent=SCREEN_TITLES[id]||id;
  document.getElementById('annSub').textContent=SCREEN_SUBS[id]||'';
  document.getElementById('annBody').innerHTML=ANN[id]||'';
  // Dots
  const mainIdx=MAIN_SCREENS.indexOf(id);
  renderDots(mainIdx);
  // Screen-specific init
  if(id==='onboard2')renderObSlides();
  if(id==='onboard3')renderObMeds();
  if(id==='today'){buildMoodRing('moodRing','mood','moodBadge');buildMoodRing('copingRing','coping','copingBadge');renderMedCards();}
  if(id==='wellness')renderWellness();
  if(id==='triggers')renderTriggers();
  if(id==='symptoms')renderSymptoms();
  if(id==='insights'){setTimeout(()=>{drawMoodChart();drawSleepChart();setupChartTooltip();renderCorrelations();},80);}
  // Live time
  updateTime();
}

function renderDots(activeIdx){
  const nav=document.getElementById('sdotNav');
  nav.innerHTML=MAIN_SCREENS.map((s,i)=>`<div class="sdot${i===activeIdx?' active':''}" onclick="goScreen('${s}')"></div>`).join('');
}

function updateTime(){
  const now=new Date();
  const t=now.getHours().toString().padStart(2,'0')+':'+now.getMinutes().toString().padStart(2,'0');
  const el=document.getElementById('statusTime');
  if(el)el.textContent=t;
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// INIT
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
document.addEventListener('DOMContentLoaded',()=>{
  state.meds=obMeds.map(m=>({...m,taken:false}));
  document.getElementById('journalPrompt').textContent=JOURNAL_PROMPTS[Math.floor(Math.random()*JOURNAL_PROMPTS.length)];
  goScreen('onboard1');
  setInterval(updateTime,60000);
});
</script>
</body>
</html>
